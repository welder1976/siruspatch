<!--

	Filename:	Custom_EncounterJournal.xml
	Project:	Custom Game Interface
	Author:		Nyll & Blizzard Entertainment

-->

<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/..\FrameXML\UI.xsd">
	<Script file="Custom_EncounterJournal.lua"/>
	<Script file="Custom_EncounterJournal_Data.lua"/>
	<Script file="Custom_EncounterJournal_Loot_Data.lua"/>

	<Button name="EncounterTierTabTemplate" virtual="true" parentArray="Tabs">
		<Size x="120" y="36"/>
		<HitRectInsets>
			<AbsInset left="-12" right="-12" top="0" bottom="0"/>
		</HitRectInsets>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parentMid" inherits="_DungeonGridTab-Mid" parentKey="mid" horizTile="true">
					<Anchors>
						<Anchor point="TOPLEFT" x="0" y="0"/>
						<Anchor point="BOTTOMRIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
				<Texture name="$parentLeft" inherits="UI-EJ-DungeonGridTab-Left" parentKey="left">
					<Anchors>
						<Anchor point="TOPRIGHT" relativePoint="TOPLEFT" x="0" y="0"/>
						<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
				<Texture name="$parentRight" inherits="UI-EJ-DungeonGridTab-Right" parentKey="right">
					<Anchors>
						<Anchor point="TOPLEFT" relativePoint="TOPRIGHT" x="0" y="0"/>
						<Anchor point="BOTTOMLEFT" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="OVERLAY">
				<Texture name="$parentMidSelect" inherits="_DungeonGridTab-MidSelect" parentKey="midSelect" horizTile="true" hidden="true">
					<Anchors>
						<Anchor point="TOPLEFT" x="0" y="0"/>
						<Anchor point="BOTTOMRIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
				<Texture name="$parentLeftSelect" inherits="UI-EJ-DungeonGridTab-LeftSelect" parentKey="leftSelect" hidden="true">
					<Anchors>
						<Anchor point="TOPRIGHT" relativePoint="TOPLEFT" x="0" y="0"/>
						<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
				<Texture name="$parentRightSelect" inherits="UI-EJ-DungeonGridTab-RightSelect" parentKey="rightSelect" hidden="true">
					<Anchors>
						<Anchor point="TOPLEFT" relativePoint="TOPRIGHT" x="0" y="0"/>
						<Anchor point="BOTTOMLEFT" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
				<Texture name="$parentSelectedGlow" inherits="UI-EJ-DungeonGridTab-SelectedGlow" parentKey="selectedGlow" hidden="true">
					<Anchors>
						<Anchor point="BOTTOMLEFT" x="-18" y="0"/>
						<Anchor point="BOTTOMRIGHT" x="18" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="HIGHLIGHT">
				<Texture name="$parentMidHighlight" inherits="_DungeonGridTab-MidHighlight" parentKey="midHighlight" horizTile="true">
					<Anchors>
						<Anchor point="TOPLEFT" x="0" y="0"/>
						<Anchor point="BOTTOMRIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
				<Texture name="$parentLeftHighlight" inherits="UI-EJ-DungeonGridTab-LeftHighlight" parentKey="leftHighlight">
					<Anchors>
						<Anchor point="TOPRIGHT" relativePoint="TOPLEFT" x="0" y="0"/>
						<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
				<Texture name="$parentRightHighlight" inherits="UI-EJ-DungeonGridTab-RightHighlight" parentKey="rightHighlight">
					<Anchors>
						<Anchor point="TOPLEFT" relativePoint="TOPRIGHT" x="0" y="0"/>
						<Anchor point="BOTTOMLEFT" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Frames>
			<Frame enableMouse="true" parentKey="grayBox" hidden="true">
				<Anchors>
					<Anchor point="TOPLEFT" x="-14" y="19"/>
					<Anchor point="BOTTOMRIGHT" x="14" y="0"/>
				</Anchors>
				<Layers>
					<Layer level="BACKGROUND">
						<Texture>
							<Anchors>
								<Anchor point="TOPLEFT" x="7" y="-25"/>
								<Anchor point="BOTTOMRIGHT" x="-7" y="0"/>
							</Anchors>
							<Color r="0" g="0" b="0" a="0.6"/>
						</Texture>
					</Layer>
				</Layers>
			</Frame>
		</Frames>
		<NormalFont style="GameFontNormalMed1"/>
		<ButtonText>
			<Anchors>
				<Anchor point="CENTER" x="0" y="-3"/>
			</Anchors>
		</ButtonText>
		<Scripts>
			<OnLoad>
				if not self:GetParent().Tabs then
					self:GetParent().Tabs = {}
				end
				
				self:GetParent().Tabs[self:GetID()] = self
				self.storedHeight = self:GetHeight()
				self:SetHeight(self.storedHeight-4)
				self:SetWidth(max(self:GetTextWidth()+20, 70))
			</OnLoad>
			<OnEnable>
				self.leftSelect:Hide()
				self.midSelect:Hide()
				self.rightSelect:Hide()
				self:SetHeight(self.storedHeight-4)
			</OnEnable>
			<OnDisable>
				self.leftSelect:Show()
				self.midSelect:Show()
				self.rightSelect:Show()
				self:SetHeight(self.storedHeight)
			</OnDisable>
		</Scripts>
	</Button>
	<Button name="EncounterTabTemplate" virtual="true">
		<Size x="63" y="57"/>
		<NormalTexture inherits="UI-EJ-Tab-UnSelected"/>
		<PushedTexture inherits="UI-EJ-Tab-Selected"/>
		<DisabledTexture inherits="UI-EJ-Tab-UnSelected"/>
		<HighlightTexture inherits="UI-EJ-Tab-Highlight" alphaMode="ADD"/>
		<Scripts>
			<OnClick function="EncounterJournal_TabClicked"/>
			<OnEnter>
				if self.tooltip then
					GameTooltip:SetOwner(self, "ANCHOR_CURSOR_RIGHT")
					GameTooltip:SetText(self.tooltip, nil, nil, nil, nil, true)
				end
			</OnEnter>
			<OnLeave function="GameTooltip_Hide"/>
		</Scripts>
	</Button>
	<Button name="EJButtonTemplate" virtual="true">
		<Size x="75" y="26"/>
		<HitRectInsets>
			<AbsInset left="-13" right="-13" top="0" bottom="0"/>
		</HitRectInsets>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture inherits="UI-EJ-FilterButtonUp" parentKey="UpLeft">
					<Size x="13" y="26"/>
					<Anchors>
						<Anchor point="RIGHT" relativePoint="LEFT" x="0" y="0"/>
					</Anchors>
				</Texture>
				<Texture inherits="UI-EJ-FilterButtonUp" parentKey="UpRight">
					<Size x="13" y="26"/>
					<Anchors>
						<Anchor point="LEFT" relativePoint="RIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
				<Texture inherits="UI-EJ-FilterButtonDown" parentKey="DownLeft" hidden="true">
					<Size x="13" y="26"/>
					<Anchors>
						<Anchor point="RIGHT" relativePoint="LEFT" x="0" y="0"/>
					</Anchors>
				</Texture>
				<Texture inherits="UI-EJ-FilterButtonDown" parentKey="DownRight" hidden="true">
					<Size x="13" y="26"/>
					<Anchors>
						<Anchor point="LEFT" relativePoint="RIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="HIGHLIGHT">
				<Texture inherits="UI-EJ-FilterButtonHighlight" parentKey="HighLeft">
					<Size x="13" y="26"/>
					<Anchors>
						<Anchor point="RIGHT" relativePoint="LEFT" x="0" y="0"/>
					</Anchors>
				</Texture>
				<Texture inherits="UI-EJ-FilterButtonHighlight" parentKey="HighRight">
					<Size x="13" y="26"/>
					<Anchors>
						<Anchor point="LEFT" relativePoint="RIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<NormalTexture inherits="_FilterButtonUp-Mid"/>
		<PushedTexture inherits="_FilterButtonDown-Mid"/>
		<HighlightTexture inherits="_FilterButtonHighlight-Mid"/>
		<NormalFont style="GameFontNormalSmall"/>
		<ButtonText>
			<Size x="0" y="12"/>
			<Anchors>
				<Anchor point="LEFT" x="-3" y="0"/>
				<Anchor point="RIGHT" x="3" y="0"/>
			</Anchors>
			<Color r="0.973" g="0.902" b="0.581"/>
		</ButtonText>
		<Scripts>
			<OnLoad>
				local l, t, _, b, r = self.UpLeft:GetTexCoord()
				self.UpLeft:SetTexCoord(l, l + (r-l)/2, t, b)
				l, t, _, b, r = self.UpRight:GetTexCoord()
				self.UpRight:SetTexCoord(l + (r-l)/2, r, t, b)

				l, t, _, b, r = self.DownLeft:GetTexCoord()
				self.DownLeft:SetTexCoord(l, l + (r-l)/2, t, b)
				l, t, _, b, r = self.DownRight:GetTexCoord()
				self.DownRight:SetTexCoord(l + (r-l)/2, r, t, b)

				l, t, _, b, r = self.HighLeft:GetTexCoord()
				self.HighLeft:SetTexCoord(l, l + (r-l)/2, t, b)
				l, t, _, b, r = self.HighRight:GetTexCoord()
				self.HighRight:SetTexCoord(l + (r-l)/2, r, t, b)
			</OnLoad>
			<OnMouseDown>
				self.UpLeft:Hide()
				self.UpRight:Hide()

				self.DownLeft:Show()
				self.DownRight:Show()
			</OnMouseDown>
			<OnMouseUp>
				self.UpLeft:Show()
				self.UpRight:Show()

				self.DownLeft:Hide()
				self.DownRight:Hide()
			</OnMouseUp>
		</Scripts>
	</Button>
	<Frame name="EncounterDescriptionTemplate" virtual="true">
		<Frames>
			<SimpleHTML parentKey="Text" setAllPoints="true" inherits="InlineHyperlinkFrameTemplate">
				<FontString inherits="GameFontBlack" justifyH="LEFT" justifyV="TOP">
					<Color r="0.25" g="0.1484375" b=".02" a="1"/>
				</FontString>
			</SimpleHTML>
		</Frames>
	</Frame>
	<Button name="EncounterInstanceButtonTemplate" hidden="true" parentArray="InstanceButtons" virtual="true">
		<Size x="174" y="96"/>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parentbgImage" parentKey="bgImage">
					<Anchors>
						<Anchor point="TOPLEFT" x="0" y="0"/>
						<Anchor point="BOTTOMRIGHT" x="0" y="0"/>
					</Anchors>
					<TexCoords left="0" right="0.68359375" top="0" bottom="0.7421875"/>
				</Texture>
			</Layer>
			<Layer level="OVERLAY">
				<Texture name="$parentHeroicIcon" file="Interface\EncounterJournal\UI-EJ-HeroicTextIcon" parentKey="heroicIcon" hidden="true">
					<Anchors>
						<Anchor point="BOTTOMRIGHT" x="-7" y="7"/>
					</Anchors>
				</Texture>
				<FontString name="$parentName" inherits="QuestTitleFontBlackShadow" parentKey="name">
					<Size x="150" y="0"/>
					<Anchors>
						<Anchor point="TOP" x="0" y="-15"/>
					</Anchors>
				</FontString>
				<FontString name="$parentRange" inherits="GameFontNormal" justifyH="LEFT" parentKey="range" text="82-83" hidden="true">
					<Size x="100" y="12"/>
					<Anchors>
						<Anchor point="BOTTOMLEFT" x="7" y="7"/>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<NormalTexture inherits="UI-EJ-DungeonButton-Up">
		</NormalTexture>
		<PushedTexture inherits="UI-EJ-DungeonButton-Down">
		</PushedTexture>
		<HighlightTexture inherits="UI-EJ-DungeonButton-Highlight">
		</HighlightTexture>
		<Scripts>
			<OnLoad>
				self.InstanceButtons = {}
			</OnLoad>
			<OnEnter>
				if self.itemID then
					GameTooltip:SetOwner(self, "ANCHOR_LEFT")
					GameTooltip:SetItemByID(self.itemID)
					self.showingTooltip = true
				end
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide()
				self.showingTooltip = false
			</OnLeave>
			<OnClick>
				if not ChatEdit_TryInsertChatLink(self.link) then
					EncounterJournal_DisplayInstance(self.instanceID)
					local instanceID = EJ_GetCurrentInstance()
					if instanceID ~= self.instanceID then
						EJ_SetValidationDifficulty(1)
					end
				end
				PlaySound("igSpellBookOpen")
			</OnClick>
		</Scripts>
	</Button>
	<Button name="EncounterBossButtonTemplate" virtual="true" hidden="true">
		<Size x="325" y="55"/>
		<Frames>
			<Frame>
				<Size x="1" y="1"/>
				<Anchors>
					<Anchor point="TOPLEFT" x="-4" y="13"/>
				</Anchors>
				<Layers>
					<Layer level="OVERLAY">
						<Texture name="$parentCreature" file="Interface\EncounterJournal\UI-EJ-BOSS-Default" parentKey="creature">
							<Size x="128" y="64"/>
							<Anchors>
								<Anchor point="TOPLEFT" x="0" y="0"/>
							</Anchors>
						</Texture>
					</Layer>
				</Layers>
				<Scripts>
					<OnLoad>
						self:GetParent().creature = self.creature
					</OnLoad>
				</Scripts>
			</Frame>
		</Frames>
		<NormalTexture inherits="UI-EJ-BossButton-Up">
		</NormalTexture>
		<PushedTexture inherits="UI-EJ-BossButton-Down">
		</PushedTexture>
		<HighlightTexture inherits="UI-EJ-BossButton-Highlight">
		</HighlightTexture>
		<ButtonText name="$parentText" parentKey="text" justifyH="LEFT" justifyV="MIDDLE">
			<Size x="160" y="40"/>
			<Anchors>
				<Anchor point="LEFT" x="105" y="-3"/>
			</Anchors>
			<Color r="0.827" g="0.659" b="0.463"/>
		</ButtonText>
		<NormalFont style="GameFontNormalMed3">
			<Color r="0.827" g="0.659" b="0.463"/>
		</NormalFont>
		<HighlightFont style="GameFontNormalMed3">
			<Color r="0.973" g="0.902" b="0.581"/>
		</HighlightFont>
		<DisabledFont style="GameFontHighlightMedium"/>
		<Scripts>
			<OnClick>
				if IsModifiedClick("CHATLINK") and ChatEdit_GetActiveWindow() then
					if self.link then
						ChatEdit_InsertLink(self.link)
					end
					return
				end
				local _, _, _, rootSectionID = EJ_GetEncounterInfo(self.encounterID)
				if ( rootSectionID == 0 ) then
					EncounterJournal_SetTab(EncounterJournal.encounter.info.lootTab:GetID())
				end
				EncounterJournal_DisplayEncounter(self.encounterID)
				PlaySound("igAbiliityPageTurn")
			</OnClick>
		</Scripts>
	</Button>
	<Button name="EncounterCreatureButtonTemplate" motionScriptsWhileDisabled="true" virtual="true" hidden="true">
		<Size x="64" y="61"/>
		<Layers>
			<Layer level="OVERLAY">
				<Texture name="$parentCreature" parentKey="creature">
					<Size x="40" y="40"/>
					<Anchors>
						<Anchor point="CENTER" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<NormalTexture inherits="UI-EJ-BossModelButton"/>
		<HighlightTexture inherits="UI-EJ-BossModelButton" alphaMode="ADD"/>
		<Scripts>
			<OnLoad>
				if not self:GetParent().creatureButtons then
					self:GetParent().creatureButtons = {}
				end
				table.insert(self:GetParent().creatureButtons, self)
			</OnLoad>
			<OnShow>
				self:SetFrameLevel(self:GetParent():GetFrameLevel()+2)
				self:Disable()
				self:Enable()
			</OnShow>
			<OnDisable>
				self:SetSize(64, 61)
				self.creature:SetSize(40, 40)
			</OnDisable>
			<OnEnable>
				self:SetSize(50, 49)
				self.creature:SetSize(30, 30)
			</OnEnable>
			<OnClick>
				EncounterJournal_DisplayCreature(self)
				PlaySound("igMainMenuOption")
			</OnClick>
			<OnEnter>
				if self.name then
					GameTooltip:SetOwner(self, "ANCHOR_RIGHT")
					GameTooltip:SetText(self.name,1,1,1)
					if self.description then
						GameTooltip:AddLine(self.description, nil, nil, nil, true)
					end
					GameTooltip:Show()
				end
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide()
			</OnLeave>
		</Scripts>
	</Button>
	<Frame name="EncounterOverviewBulletTemplate" virtual="true">
		<Size x="115" y="15"/>
		<Layers>
			<Layer level="OVERLAY">
				<Texture parentKey="Bullet" name="$parentBullet" inherits="UI-EJ-Bullet">
					<Anchors>
						<Anchor point="TOPLEFT"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Frames>
			<SimpleHTML parentKey="Text" inherits="InlineHyperlinkFrameTemplate">
				<Size x="95" y="10"/>
				<FontString inherits="GameFontBlack" justifyH="LEFT" justifyV="TOP">
					<Color r="0.25" g="0.1484375" b=".02" a="1"/>
				</FontString>
				<Scripts>
					<OnLoad>
						self:SetPoint("TOPLEFT", self:GetParent().Bullet, "TOPRIGHT", 4, 0)
					</OnLoad>
				</Scripts>
			</SimpleHTML>
		</Frames>
		<Scripts>
			<OnLoad>
				if not self:GetParent().Bullets then
					self:GetParent().Bullets = {}
				end
				table.insert(self:GetParent().Bullets, self)
			</OnLoad>
		</Scripts>
	</Frame>
	<Frame name="EncounterSectionIconTemplate" virtual="true">
		<Size x="32" y="32"/>
		<Layers>
			<Layer level="OVERLAY">
				<Texture name="$parentIcon" file="Interface\EncounterJournal\UI-EJ-Icons" parentKey="icon">
					<Size x="32" y="32"/>
					<Anchors>
						<Anchor point="CENTER" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Scripts>
			<OnEnter>
				if self.tooltipTitle then
					GameTooltip:SetOwner(self, "ANCHOR_RIGHT")
					GameTooltip:SetText(self.tooltipTitle,1,1,1)
					GameTooltip:AddLine(self.tooltipText, nil, nil, nil, true)
					GameTooltip:Show()
				end
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide()
			</OnLeave>
		</Scripts>
	</Frame>
	<Frame name="EncounterInfoTemplate" virtual="true">
		<Size x="5" y="24"/>
		<Frames>
			<Button name="$parentHeaderButton" parentKey="button">
				<Size x="5" y="24"/>
				<Anchors>
					<Anchor point="TOPLEFT" x="0" y="0"/>
					<Anchor point="RIGHT" x="0" y="0"/>
				</Anchors>
				<Layers>
					<Layer level="OVERLAY">
						<FontString name="$parentExpandedIcon" inherits="GameFontNormalLarge" parentKey="expandedIcon">
							<Size x="12" y="12"/>
							<Anchors>
								<Anchor point="LEFT" x="5" y="0"/>
							</Anchors>
						</FontString>
						<Texture name="$parentAbilityIcon" parentKey="abilityIcon">
							<Size x="18" y="18"/>
							<Anchors>
								<Anchor point="LEFT" relativeTo="$parentExpandedIcon" relativePoint="RIGHT" x="5" y="0"/>
							</Anchors>
						</Texture>
						<FontString name="$parentTitle" inherits="GameFontNormal" parentKey="title" justifyH="LEFT">
							<Size x="5" y="10"/>
							<Anchors>
								<Anchor point="LEFT" relativeTo="$parentAbilityIcon" relativePoint="RIGHT" x="5" y="-1"/>
								<Anchor point="RIGHT" relativeTo="$parentIcon4" relativePoint="LEFT" x="-5" y="0"/>
							</Anchors>
						</FontString>
					</Layer>
					<Layer level="ARTWORK">
						<Texture name="$parentELeftUp" inherits="UI-EJ-PaperHeader-SelectUp-Left" parentKey="eLeftUp" hidden="false">
							<Anchors>
								<Anchor point="LEFT" x="-1" y="-1"/>
							</Anchors>
						</Texture>
						<Texture name="$parentERightUp" inherits="UI-EJ-PaperHeader-SelectUp-Right" parentKey="eRightUp" hidden="false">
							<Anchors>
								<Anchor point="RIGHT" x="3" y="-1"/>
							</Anchors>
						</Texture>
						<Texture name="$parentELeftDown" inherits="UI-EJ-PaperHeader-SelectDown-Left" parentKey="eLeftDown" hidden="false">
							<Anchors>
								<Anchor point="LEFT" relativeTo="$parentELeftUp" x="0" y="0"/>
							</Anchors>
						</Texture>
						<Texture name="$parentERightDown" inherits="UI-EJ-PaperHeader-SelectDown-Right" parentKey="eRightDown" hidden="false">
							<Anchors>
								<Anchor point="RIGHT" relativeTo="$parentERightUp" x="0" y="0"/>
							</Anchors>
						</Texture>
						<Texture name="$parentCLeftUp" inherits="UI-EJ-PaperHeader-UnSelectUp-Left" parentKey="cLeftUp" hidden="false">
							<Anchors>
								<Anchor point="LEFT" relativeTo="$parentELeftUp" x="0" y="0"/>
							</Anchors>
						</Texture>
						<Texture name="$parentCRightUp" inherits="UI-EJ-PaperHeader-UnSelectUp-Right" parentKey="cRightUp" hidden="false">
							<Anchors>
								<Anchor point="RIGHT" relativeTo="$parentERightUp" x="0" y="0"/>
							</Anchors>
						</Texture>
						<Texture name="$parentCLeftDown" inherits="UI-EJ-PaperHeader-UnSelectDown-Left" parentKey="cLeftDown" hidden="false">
							<Anchors>
								<Anchor point="LEFT" relativeTo="$parentELeftUp" x="0" y="0"/>
							</Anchors>
						</Texture>
						<Texture name="$parentCRightDown" inherits="UI-EJ-PaperHeader-UnSelectDown-Right" parentKey="cRightDown" hidden="false">
							<Anchors>
								<Anchor point="RIGHT" relativeTo="$parentERightUp" x="0" y="0"/>
							</Anchors>
						</Texture>
					</Layer>
					<Layer level="BORDER">
						<Texture name="$parentEMidUp" inherits="_PaperHeader-SelectUp-Mid" parentKey="eMidUp" hidden="false">
							<Anchors>
								<Anchor point="LEFT" relativeTo="$parentELeftUp" relativePoint="RIGHT" x="-32" y="0"/>
								<Anchor point="RIGHT" relativeTo="$parentERightUp" relativePoint="LEFT" x="32" y="0"/>
							</Anchors>
						</Texture>
						<Texture name="$parentEMidDown" inherits="_PaperHeader-SelectDown-Mid" parentKey="eMidDown" hidden="false">
							<Anchors>
								<Anchor point="LEFT" relativeTo="$parentELeftDown" relativePoint="RIGHT" x="-32" y="0"/>
								<Anchor point="RIGHT" relativeTo="$parentERightDown" relativePoint="LEFT" x="32" y="0"/>
							</Anchors>
						</Texture>
						<Texture name="$parentCMidUp" inherits="_PaperHeader-UnSelectUp-Mid" parentKey="cMidUp" hidden="false">
							<Anchors>
								<Anchor point="LEFT" relativeTo="$parentELeftUp" relativePoint="RIGHT" x="-32" y="0"/>
								<Anchor point="RIGHT" relativeTo="$parentERightUp" relativePoint="LEFT" x="32" y="0"/>
							</Anchors>
						</Texture>
						<Texture name="$parentCMidDown" inherits="_PaperHeader-UnSelectDown-Mid" parentKey="cMidDown" hidden="false">
							<Anchors>
								<Anchor point="LEFT" relativeTo="$parentELeftDown" relativePoint="RIGHT" x="-32" y="0"/>
								<Anchor point="RIGHT" relativeTo="$parentERightDown" relativePoint="LEFT" x="32" y="0"/>
							</Anchors>
						</Texture>
					</Layer>
					<Layer level="HIGHLIGHT">
						<Texture name="$parentHighlightLeft" inherits="UI-EJ-PaperHeader-Highlight-Left">
							<Anchors>
								<Anchor point="LEFT" x="-1" y="-1"/>
							</Anchors>
						</Texture>
						<Texture name="$parentHighlightRight" inherits="UI-EJ-PaperHeader-Highlight-Right">
							<Anchors>
								<Anchor point="RIGHT" x="3" y="-1"/>
							</Anchors>
						</Texture>
						<Texture name="$parentHighlightMid" inherits="_PaperHeader-Highlight-Mid">
							<Anchors>
								<Anchor point="LEFT" relativeTo="$parentHighlightLeft" relativePoint="RIGHT" x="-32" y="0"/>
								<Anchor point="RIGHT" relativeTo="$parentHighlightRight" relativePoint="LEFT" x="32" y="0"/>
							</Anchors>
						</Texture>
					</Layer>
				</Layers>
				<Frames>
					<Frame name="$parentGlow" parentKey="glow" alpha="0">
						<Animations>
							<AnimationGroup parentKey="flashAnim">
								<Alpha change="-1" duration="0" order="1"/>
								<Alpha change="1" duration="0.6" order="2"/>
								<Alpha change="-1" duration="0.6" order="3"/>
								<Alpha change="1" duration="0.6" order="4"/>
								<Alpha change="-1" duration="0.6" order="5"/>
								<Alpha change="1" duration="0.6" order="6"/>
								<Alpha change="-1" duration="0.6" order="7"/>
							</AnimationGroup>
						</Animations>
						<Anchors>
							<Anchor point="TOPLEFT" x="0" y="0"/>
							<Anchor point="BOTTOMRIGHT" x="0" y="0"/>
						</Anchors>
						<Layers>
							<Layer level="OVERLAY">
								<Texture name="$parentHighlightLeft" inherits="UI-EJ-PaperHeader-Highlight-Left">
									<Anchors>
										<Anchor point="LEFT" x="-1" y="-1"/>
									</Anchors>
								</Texture>
								<Texture name="$parentHighlightRight" inherits="UI-EJ-PaperHeader-Highlight-Right">
									<Anchors>
										<Anchor point="RIGHT" x="3" y="-1"/>
									</Anchors>
								</Texture>
								<Texture name="$parentHighlightMid" inherits="_PaperHeader-Highlight-Mid">
									<Anchors>
										<Anchor point="LEFT" relativeTo="$parentHighlightLeft" relativePoint="RIGHT" x="-32" y="0"/>
										<Anchor point="RIGHT" relativeTo="$parentHighlightRight" relativePoint="LEFT" x="32" y="0"/>
									</Anchors>
								</Texture>
							</Layer>
						</Layers>
					</Frame>
					<Frame name="$parentIcon1" inherits="EncounterSectionIconTemplate" parentKey="icon1">
						<Anchors>
							<Anchor point="RIGHT" x="5" y="0"/>
						</Anchors>
					</Frame>
					<Frame name="$parentIcon2" inherits="EncounterSectionIconTemplate" parentKey="icon2">
						<Anchors>
							<Anchor point="RIGHT" relativeTo="$parentIcon1" relativePoint="LEFT" x="10" y="0"/>
						</Anchors>
					</Frame>
					<Frame name="$parentIcon3" inherits="EncounterSectionIconTemplate" parentKey="icon3">
						<Anchors>
							<Anchor point="RIGHT" relativeTo="$parentIcon2" relativePoint="LEFT" x="10" y="0"/>
						</Anchors>
					</Frame>
					<Frame name="$parentIcon4" inherits="EncounterSectionIconTemplate" parentKey="icon4">
						<Anchors>
							<Anchor point="RIGHT" relativeTo="$parentIcon3" relativePoint="LEFT" x="19" y="0"/>
						</Anchors>
					</Frame>
					<Button name="$parentPortrait" parentKey="portrait">
						<Size x="26" y="26"/>
						<Anchors>
							<Anchor point="CENTER" relativeTo="$parentAbilityIcon" x="0" y="0"/>
						</Anchors>
						<Layers>
							<Layer level="OVERLAY">
								<Texture name="$parentIcon" parentKey="icon">
									<Size x="26" y="26"/>
									<Anchors>
										<Anchor point="CENTER" x="0" y="0"/>
									</Anchors>
								</Texture>
							</Layer>
							<Layer level="OVERLAY" textureSubLevel="2">
								<Texture name="$parentFrame" inherits="UI-EJ-CreatureHeaderFrameSm">
									<Anchors>
										<Anchor point="CENTER" relativeTo="$parentIcon" x="0" y="0"/>
									</Anchors>
								</Texture>
							</Layer>
							<Layer level="HIGHLIGHT">
								<Texture name="$parentFrameHighlight" inherits="UI-EJ-CreatureHeaderFrameSm" alphaMode="ADD">
									<Anchors>
										<Anchor point="CENTER" relativeTo="$parentIcon" x="0" y="0"/>
									</Anchors>
								</Texture>
							</Layer>
						</Layers>
						<Scripts>
							<OnClick>
								if self.displayInfo then
									EncounterJournal.encounter.info.modelTab:Click()
									EncounterJournal_DisplayCreature(self)
								end
								self:Enable()
								PlaySound("igMainMenuOptionCheckBoxOn")
							</OnClick>
						</Scripts>
					</Button>
				</Frames>
				<Scripts>
					<OnLoad>
						self.textures = {
							expanded = {
								up = {self.eLeftUp, self.eMidUp, self.eRightUp},
								down = {self.eLeftDown, self.eMidDown, self.eRightDown}
							},
							collapsed = {
								up = {self.cLeftUp, self.cMidUp, self.cRightUp},
								down = {self.cLeftDown, self.cMidDown, self.cRightDown}
							},
						}
						self.tex = self.textures.collapsed
					</OnLoad>
					<OnShow>
						EncounterJournal_UpdateButtonState(self)
					</OnShow>
					<OnClick>
						if IsModifiedClick("CHATLINK") and ChatEdit_GetActiveWindow() then
							if self.link then
								ChatEdit_InsertLink(self.link)
							end
							return
						end

						EncounterJournal_ToggleHeaders(self:GetParent())
						self:GetScript("OnShow")(self)
						PlaySound("igMainMenuOptionCheckBoxOn")
					</OnClick>
					<OnMouseDown>
						self.tex.up[1]:Hide()
						self.tex.up[2]:Hide()
						self.tex.up[3]:Hide()

						self.tex.down[1]:Show()
						self.tex.down[2]:Show()
						self.tex.down[3]:Show()
					</OnMouseDown>
					<OnMouseUp>
						self.tex.up[1]:Show()
						self.tex.up[2]:Show()
						self.tex.up[3]:Show()

						self.tex.down[1]:Hide()
						self.tex.down[2]:Hide()
						self.tex.down[3]:Hide()
					</OnMouseUp>
					<OnEnter>
						GameTooltip:SetOwner(self, "ANCHOR_RIGHT")
						GameTooltip:SetText(self.title:GetText(), nil, nil, nil, nil, true)
					</OnEnter>
					<OnLeave>
						GameTooltip:Hide()
					</OnLeave>
				</Scripts>
			</Button>
			<Frame parentKey="overviewDescription" inherits="EncounterDescriptionTemplate">
				<Size x="95" y="10"/>
				<Anchors>
					<Anchor point="TOP" relativeTo="$parentHeaderButton" relativePoint="BOTTOM" x="0" y="-9"/>
				</Anchors>
			</Frame>
			<Frame inherits="EncounterOverviewBulletTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="$parentHeaderButton" x="13" y="-9"/>
				</Anchors>
			</Frame>
		</Frames>
		<Layers>
			<Layer level="ARTWORK">
				<FontString name="$parentDescription" inherits="GameFontBlack" justifyH="LEFT" parentKey="description">
					<Size x="0" y="0"/>
					<!-- <Anchors>
						<Anchor point="TOP" relativePoint="BOTTOM" relativeTo="$parentHeaderButton" x="0" y="-9"/>
					</Anchors> -->
					<Anchors>
						<Anchor point="TOP" x="0" y="-34" />
					</Anchors>
					<Color r="0.25" g="0.1484375" b=".02" a="1"/>
				</FontString>
			</Layer>
			<Layer level="BACKGROUND">
				<Texture name="$parentDescriptionBG" inherits="UI-EJ-AbilityTextBG" parentKey="descriptionBG">
					<Size x="12" y="12"/>
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parentDescription" x="-9" y="12"/>
						<Anchor point="BOTTOMRIGHT" relativeTo="$parentDescription" x="9" y="-11"/>
					</Anchors>
				</Texture>
				<Texture inherits="UI-EJ-AbilityTextBottomBorder" parentKey="descriptionBGBottom">
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentDescriptionBG" relativePoint="BOTTOMLEFT" x="0" y="0"/>
						<Anchor point="RIGHT" relativeTo="$parentDescriptionBG" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Scripts>
			<OnHide>
				self:SetScript("OnUpdate", nil)
			</OnHide>
		</Scripts>
	</Frame>
	<Button name="EncounterItemTemplate" virtual="true">
		<Size x="321" y="45"/>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parentIcon" parentKey="icon">
					<Size x="42" y="42"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="2" y="-2"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="BORDER">
				<Texture inherits="UI-EJ-DungeonLootFrame" parentKey="bossTexture">
					<Anchors>
						<Anchor point="CENTER" x="24" y="0"/>
					</Anchors>
				</Texture>
				<Texture inherits="UI-EJ-LootFrame" parentKey="bosslessTexture">
					<Anchors>
						<Anchor point="CENTER" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<FontString name="$parentName" inherits="GameFontNormalMed3" justifyH="LEFT" parentKey="name">
					<Size x="250" y="12"/>
					<Anchors>
						<Anchor point="TOPLEFT" relativePoint="TOPRIGHT" relativeTo="$parentIcon" x="7" y="-7"/>
					</Anchors>
				</FontString>
				<FontString name="$parentArmorClass" inherits="GameFontBlack" justifyH="RIGHT" parentKey="armorType">
					<Size x="0" y="12"/>
					<Anchors>
						<Anchor point="BOTTOMRIGHT" relativeTo="$parentName" relativePoint="TOPLEFT" x="264" y="-30"/>
					</Anchors>
					<Color r="0.25" g="0.1484375" b=".02" a="1"/>
				</FontString>
				<FontString name="$parentSlot" inherits="GameFontBlack" justifyH="LEFT" parentKey="slot">
					<Size x="0" y="12"/>
					<Anchors>
						<Anchor point="BOTTOMLEFT" relativePoint="BOTTOMRIGHT" relativeTo="$parentIcon" x="7" y="5"/>
						<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMLEFT" relativeTo="$parentArmorClass" x="-15" y="0"/>
					</Anchors>
					<Color r="0.25" g="0.1484375" b=".02" a="1"/>
				</FontString>
				<FontString name="$parentBoss" inherits="GameFontBlack" justifyH="LEFT" parentKey="boss">
					<Size x="0" y="12"/>
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parentIcon" relativePoint="BOTTOMLEFT" y="-3"/>
					</Anchors>
					<Color r="0.25" g="0.1484375" b=".02" a="1"/>
				</FontString>
			</Layer>
			<Layer level="OVERLAY">
				<Texture parentKey="IconBorder" file="Interface\Common\WhiteIconFrame" hidden="true">
					<Size x="37" y="37"/>
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parentIcon"/>
						<Anchor point="BOTTOMRIGHT" relativeTo="$parentIcon"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Frames>
			<Frame name="$parentGlow" parentKey="glow" toplevel="true" alpha="0">
				<Animations>
					<AnimationGroup parentKey="flashAnim">
						<Alpha change="-1" duration="0" order="1"/>
						<Alpha change="1" duration="0.6" order="2"/>
						<Alpha change="-1" duration="0.6" order="3"/>
						<Alpha change="1" duration="0.6" order="4"/>
						<Alpha change="-1" duration="0.6" order="5"/>
						<Alpha change="1" duration="0.6" order="6"/>
						<Alpha change="-1" duration="0.6" order="7"/>
					</AnimationGroup>
				</Animations>
				<Anchors>
					<Anchor point="TOPLEFT" x="-2" y="0"/>
					<Anchor point="BOTTOMRIGHT" x="2" y="0"/>
				</Anchors>
				<Backdrop edgeFile="Interface\TutorialFrame\UI-TutorialFrame-CalloutGlow" alphaMode="ADD">
					<EdgeSize val="11"/>
				</Backdrop>
			</Frame>
		</Frames>
		<Scripts>
			<OnLoad>
				self.UpdateTooltip = function()
					GameTooltip:SetOwner(self, "ANCHOR_LEFT")
					EncounterJournal_SetTooltip(self.link)
				end
			</OnLoad>
			<OnClick>
				if (not HandleModifiedItemClick(self.link)) then
					EncounterJournal_Loot_OnClick(self)
				else
					PlaySound("igMainMenuOption")
				end
			</OnClick>
			<OnEnter>
				GameTooltip:SetOwner(self, "ANCHOR_LEFT")
				EncounterJournal_SetTooltip(self.link)
				self.showingTooltip = true
				self:SetScript("OnUpdate", EncounterJournal_Loot_OnUpdate)
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide()
				self.showingTooltip = false
				self:SetScript("OnUpdate", nil)
				ResetCursor()
			</OnLeave>
		</Scripts>
	</Button>
	<Button name="EncounterSearchSMTemplate" virtual="true">
		<Size x="275" y="27"/>
		<Layers>
			<Layer level="BORDER">
				<Texture parentKey="selectedTexture" file="Interface\Common\Search" hidden="true">
					<Size x="126" y="27"/>
					<Anchors>
						<Anchor point="TOPLEFT"/>
						<Anchor point="BOTTOMRIGHT"/>
					</Anchors>
					<TexCoords left="0.00195312" right="0.248047" top="0.617188" bottom="0.828125"/>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<Texture name="$parentIconFrame" inherits="UI-EJ-SearchIconFrameLg">
					<Size x="21" y="21"/>
					<Anchors>
						<Anchor point="LEFT" x="5" y="1"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="OVERLAY">
				<Texture name="$parentIcon" file="Interface\Icons\Ability_ThunderClap" parentKey="icon">
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parentIconFrame" x="1" y="-2"/>
						<Anchor point="BOTTOMRIGHT" relativeTo="$parentIconFrame" x="-1" y="1"/>
					</Anchors>
				</Texture>
				<FontString name="$parentName" inherits="GameFontNormalSmall" justifyH="LEFT" parentKey="name" text="ENCOUNTER">
					<Size x="400" y="0"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentIcon" relativePoint="RIGHT" x="5" y="0"/>
						<Anchor point="RIGHT" x="-5" y="0"/>
					</Anchors>
					<Color r="0.96875" g="0.8984375" b="0.578125" a="1"/>
				</FontString>
			</Layer>
		</Layers>
		<NormalTexture inherits="_SearchBarSm">
		</NormalTexture>
		<PushedTexture inherits="_SearchBarSm">
		</PushedTexture>
		<HighlightTexture inherits="UI-EJ-SearchBarHighlightLg">
		</HighlightTexture>
		<Scripts>
			<OnLoad>
				if not self:GetParent().searchPreview then
					self:GetParent().searchPreview = {}
				end

				table.insert(self:GetParent().searchPreview, self)

				self.shoppingTooltips = { ShoppingTooltip1, ShoppingTooltip2, ShoppingTooltip3 }
				self.UpdateTooltip = function(self)
					if ( not self.comparing and IsModifiedClick("COMPAREITEMS")) then
						GameTooltip_ShowCompareItem()
						self.comparing = true
					elseif ( self.comparing and not IsModifiedClick("COMPAREITEMS")) then
						for _, frame in pairs(self.shoppingTooltips) do
							frame:Hide()
						end

						self.needsReset = true
						self.comparing = false
					end
				end
			</OnLoad>
			<OnEnter>
				if self.link then
					GameTooltip:SetOwner(self, "ANCHOR_RIGHT")
					GameTooltip:SetHyperlink(self.link)
					self.showingTooltip = true

					self:SetScript("OnUpdate", self.UpdateTooltip)

				end
				EncounterJournal_SetSearchPreviewSelection(self:GetID())
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide()
				self.showingTooltip = false

				for _, frame in pairs(self.shoppingTooltips) do
					frame:Hide()
				end
				self.comparing = false
				self:SetScript("OnUpdate", nil)
			</OnLeave>
			<OnShow>
				self:SetFrameLevel(self:GetParent():GetFrameLevel() + 10)
			</OnShow>
			<OnClick>
				EncounterJournal_SelectSearch(self:GetID())
				PlaySound("igSpellBookOpen")
			</OnClick>
		</Scripts>
	</Button>
	<Button name="EncounterSearchLGTemplate" virtual="true">
		<Size x="575" y="49"/>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parentbackground" parentKey="background" inherits="_SearchBarLg" />
			</Layer>
			<Layer level="OVERLAY">
				<Texture name="$parentIconFrame" inherits="UI-EJ-SearchIconFrameLg">
					<Anchors>
						<Anchor point="LEFT" x="10" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<Texture name="$parentIcon" file="Interface\Icons\Ability_ThunderClap" parentKey="icon">
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parentIconFrame" x="1" y="-2"/>
						<Anchor point="BOTTOMRIGHT" relativeTo="$parentIconFrame" x="-1" y="1"/>
					</Anchors>
				</Texture>
				<FontString name="$parentName" inherits="GameFontNormalLarge" justifyH="LEFT" parentKey="name" text="ENCOUNTER">
					<Size x="460" y="12"/>
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parentIcon" relativePoint="TOPRIGHT" x="10" y="0"/>
					</Anchors>
					<Color r="0.96875" g="0.8984375" b="0.578125" a="1"/>
				</FontString>
				<FontString name="$parentPath" inherits="GameFontNormal" justifyH="LEFT" parentKey="path" text="ENCOUNTER">
					<Size x="400" y="0"/>
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parentName" relativePoint="BOTTOMLEFT" x="0" y="-7"/>
					</Anchors>
					<Color r="0.66796875" g="0.51171875" b="0.3359375" a="1"/>
				</FontString>
				<FontString name="$parentType" inherits="GameFontNormal" justifyH="RIGHT" parentKey="resultType" text="ENCOUNTER">
					<Size x="140" y="0"/>
					<Anchors>
						<Anchor point="RIGHT" x="-14" y="0"/>
					</Anchors>
					<Color r="0.66796875" g="0.51171875" b="0.3359375" a="1"/>
				</FontString>
			</Layer>
		</Layers>
		<!-- <NormalTexture inherits="_SearchBarLg">
		</NormalTexture> -->
		<PushedTexture inherits="_SearchBarLg">
		</PushedTexture>
		<HighlightTexture inherits="UI-EJ-SearchBarHighlightLg">
		</HighlightTexture>
		<Scripts>
			<OnLoad>
				self.shoppingTooltips = { ShoppingTooltip1, ShoppingTooltip2, ShoppingTooltip3 }
				self.UpdateTooltip = function(self)
					if ( not self.comparing and IsModifiedClick("COMPAREITEMS")) then
						GameTooltip_ShowCompareItem()
						self.comparing = true
					elseif ( self.comparing and not IsModifiedClick("COMPAREITEMS")) then
						for _, frame in pairs(self.shoppingTooltips) do
							frame:Hide()
						end

						self.needsReset = true
						self.comparing = false
					end
				end
			</OnLoad>
			<OnEnter>
				if self.link then
					GameTooltip:SetOwner(self, "ANCHOR_RIGHT")
					GameTooltip:SetHyperlink(self.link)
					self.showingTooltip = true

					self:SetScript("OnUpdate", self.UpdateTooltip)
				end
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide()
				self.showingTooltip = false

				for _, frame in pairs(self.shoppingTooltips) do
					frame:Hide()
				end
				self.comparing = false
				self:SetScript("OnUpdate", nil)
			</OnLeave>
			<OnClick>
				EncounterJournal_SelectSearch(self:GetID())
				PlaySound("igSpellBookOpen")
			</OnClick>
		</Scripts>
	</Button>
	<Button name="EncounterMapButtonTemplate" virtual="true">
		<Size x="50" y="49"/>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parentbgImage" parentKey="bgImage">
					<Size x="36" y="36"/>
					<Anchors>
						<Anchor point="CENTER" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<NormalTexture file="Interface\EncounterJournal\UI-EncounterJournalTextures">
			<TexCoords left="0.84960938" right="0.97070313" top="0.42871094" bottom="0.48828125"/>
		</NormalTexture>
		<PushedTexture file="Interface\EncounterJournal\UI-EncounterJournalTextures">
			<TexCoords left="0.77734375" right="0.89843750" top="0.26953125" bottom="0.32910156"/>
		</PushedTexture>
		<HighlightTexture file="Interface\EncounterJournal\UI-EncounterJournalTextures">
			<TexCoords left="0.68945313" right="0.81054688" top="0.33300781" bottom="0.39257813"/>
		</HighlightTexture>
		<Scripts>
			<OnEnter>
				if self.tooltipTitle then
					WorldMapTooltip:SetOwner(self, "ANCHOR_LEFT")
					WorldMapTooltip:SetText(self.tooltipTitle,1,1,1)
					WorldMapTooltip:AddLine(self.tooltipText, nil, nil, nil, true)
					WorldMapTooltip:Show()
				end
			</OnEnter>
			<OnLeave>
				WorldMapTooltip:Hide()
			</OnLeave>
			<OnShow>
				self:SetFrameLevel(self:GetParent():GetFrameLevel() + 10)
			</OnShow>
			<OnClick>
				if WORLDMAP_SETTINGS.size ~= WORLDMAP_WINDOWED_SIZE then
					RunBinding("TOGGLEWORLDMAP")
				end

				ToggleFrame(EncounterJournal)
				EncounterJournal_ListInstances()
				EncounterJournal_DisplayInstance(self.instanceID)
				local _, _, _, rootSectionID = EJ_GetEncounterInfo(self.encounterID)
				if ( rootSectionID == 0 ) then
					EncounterJournal_SetTab(EncounterJournal.encounter.info.lootTab:GetID())
				end
				EncounterJournal_DisplayEncounter(self.encounterID)
			</OnClick>
		</Scripts>
	</Button>
	<Button name="LootJournalItemSetItemButtonTemplate" parentArray="ItemButtons" hidden="true" virtual="true">
		<Size x="32" y="32"/>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parentIcon" parentKey="Icon" file="Interface/ICONS/temp">
					<Size x="28" y="28"/>
					<Anchors>
						<Anchor point="CENTER"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="BORDER">
				<Texture parentKey="Border" atlas="loottab-set-itemborder-green" file="Interface/EncounterJournal/LootTab" useAtlasSize="true">
					<Size x="41" y="41"/>
					<Anchors>
						<Anchor point="RIGHT" relativeTo="$parentIcon" relativePoint="CENTER" x="20" y="1"/>
					</Anchors>
					<TexCoords left="0.171875" right="0.332031" top="0.0078125" bottom="0.328125"/>
				</Texture>
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad>
				if not self:GetParent().ItemButtons then
					self:GetParent().ItemButtons = {}
				end

				self:GetParent().ItemButtons[#self:GetParent().ItemButtons + 1] = self

				self.UpdateTooltip = LootJournalItemButton_OnEnter;
			</OnLoad>
			<OnClick function="LootJournalItemButton_OnClick"/>
			<OnEnter function="LootJournalItemButton_OnEnter"/>
			<OnLeave>
				GameTooltip:Hide()
				ResetCursor()

				EncounterJournal.LootJournal.ItemSetsScrollFrame.activeItemSetButton = nil
			</OnLeave>
			<OnUpdate function="LootJournalItemButton_OnUpdate"/>
		</Scripts>
	</Button>
	<Button name="LootJournalItemSetButtonTemplate" virtual="true">
		<Size x="744" y="41"/>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture parentKey="Background" atlas="loottab-set-background" file="Interface/EncounterJournal/LootTabBackground" useAtlasSize="true">
					<Size x="744" y="41"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="0" y="0"/>
					</Anchors>
					<TexCoords left="0.000976562" right="0.727539" top="0.75" bottom="0.830078"/>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<FontString name="$parentSetName" parentKey="SetName" inherits="GameFontNormalMed2" text="SetName" maxLines="1" justifyH="LEFT">
					<Size x="320" y="0"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="38" y="-6"/>
					</Anchors>
				</FontString>
				<FontString name="$parentItemLevel" parentKey="ItemLevel" inherits="GameFontNormal" text="Item Level" maxLines="1" justifyH="LEFT">
					<Size x="320" y="0"/>
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parentSetName" relativePoint="BOTTOMLEFT" x="0" y="-2"/>
					</Anchors>
					<Color r="0.718" g="0.561" b="0.416"/>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<Frame name="$parentSourceTooltipHitArea" parentKey="SourceTooltipHitArea" frameStrata="HIGH" toplevel="true">
				<Size x="320" y="38"/>
				<Anchors>
					<Anchor point="LEFT" relativePoint="LEFT" x="34" y="0" />
				</Anchors>
				<Scripts>
					<OnEnter function="LootJournalItemSetButton_OnEnter"/>
					<OnLeave>
						GameTooltip_Hide()
						EncounterJournal.LootJournal.ItemSetsScrollFrame.activeButton = nil
					</OnLeave>
				</Scripts>
			</Frame>
			<Frame name="$parentPVPIcon" parentKey="PVPIcon" hidden="true">
				<Size x="30" y="30"/>
				<Anchors>
					<Anchor point="LEFT" relativePoint="LEFT" x="0" y="2" />
				</Anchors>
				<Layers>
					<Layer level="BACKGROUND">
						<Texture name="$parentIcon" parentKey="Icon" file="Interface\Store\prestige-icon-4"/>
					</Layer>
				</Layers>
				<Scripts>
					<OnEnter>
						GameTooltip:SetOwner(self, "ANCHOR_RIGHT")
						GameTooltip:SetText(LOOTJOURNAL_PVPICON_TOOLTIP_HEAD, 1, 1, 1)
						GameTooltip:AddLine(LOOTJOURNAL_PVPICON_TOOLTIP, nil, nil, nil, 1)
						GameTooltip:Show()
					</OnEnter>
					<OnLeave function="GameTooltip_Hide"/>
				</Scripts>
			</Frame>
			<Button name="$parentItemButton1" parentKey="ItemButton1" inherits="LootJournalItemSetItemButtonTemplate">
				<Anchors>
					<Anchor point="LEFT" x="397" y="0"/>
				</Anchors>
			</Button>
			<Button name="$parentItemButton2" parentKey="ItemButton2" inherits="LootJournalItemSetItemButtonTemplate">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentItemButton1" relativePoint="RIGHT" x="5" y="0" />
				</Anchors>
			</Button>
			<Button name="$parentItemButton3" parentKey="ItemButton3" inherits="LootJournalItemSetItemButtonTemplate">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentItemButton2" relativePoint="RIGHT" x="5" y="0" />
				</Anchors>
			</Button>
			<Button name="$parentItemButton4" parentKey="ItemButton4" inherits="LootJournalItemSetItemButtonTemplate">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentItemButton3" relativePoint="RIGHT" x="5" y="0" />
				</Anchors>
			</Button>
			<Button name="$parentItemButton5" parentKey="ItemButton5" inherits="LootJournalItemSetItemButtonTemplate">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentItemButton4" relativePoint="RIGHT" x="5" y="0" />
				</Anchors>
			</Button>
			<Button name="$parentItemButton6" parentKey="ItemButton6" inherits="LootJournalItemSetItemButtonTemplate">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentItemButton5" relativePoint="RIGHT" x="5" y="0" />
				</Anchors>
			</Button>
			<Button name="$parentItemButton7" parentKey="ItemButton7" inherits="LootJournalItemSetItemButtonTemplate">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentItemButton6" relativePoint="RIGHT" x="5" y="0" />
				</Anchors>
			</Button>
			<Button name="$parentItemButton8" parentKey="ItemButton8" inherits="LootJournalItemSetItemButtonTemplate">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentItemButton7" relativePoint="RIGHT" x="5" y="0" />
				</Anchors>
			</Button>
		</Frames>
	</Button>

	<Frame name="EncounterJournal" inherits="PortraitFrameTemplate" toplevel="true" enableMouse="true" parent="UIParent" hidden="true">
		<Size x="800" y="496"/>
		<Anchors>
			<Anchor point="CENTER" x="0" y="0"/>
		</Anchors>
		<Frames>
			<EditBox name="$parentSearchBox" inherits="SearchBoxTemplate" parentKey="searchBox" letters="40">
				<Size x="210" y="20"/>
				<Anchors>
					<Anchor point="TOPRIGHT" x="-10" y="-32"/>
				</Anchors>
				<Frames>
					<Frame parentKey="searchPreviewContainer" name="$parentsearchPreviewContainer" hidden="true">
						<Size x="0" y="24"/>
						<Anchors>
							<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT"/>
							<Anchor point="TOPRIGHT" relativePoint="BOTTOMRIGHT"/>
						</Anchors>
						<Layers>
							<Layer level="ARTWORK">
								<Texture parentKey="botLeftCorner" name="$parentbotLeftCorner" inherits="UI-Frame-BotCornerLeft">
									<Anchors>
										<Anchor point="LEFT" x="-7" y="0"/>
										<Anchor point="BOTTOM" x="0" y="-5"/>
									</Anchors>
								</Texture>
								<Texture parentKey="botRightCorner" name="$parentbotRightCorner" inherits="UI-Frame-BotCornerRight">
									<Anchors>
										<Anchor point="BOTTOM" x="0" y="-5"/>
										<Anchor point="RIGHT" x="4" y="0"/>
									</Anchors>
								</Texture>
								<Texture parentKey="bottomBorder" name="$parentbottomBorder" inherits="_UI-Frame-Bot">
									<Anchors>
										<Anchor point="BOTTOMLEFT" relativeTo="$parentbotLeftCorner" relativePoint="BOTTOMRIGHT" y="0"/>
										<Anchor point="BOTTOMRIGHT" relativeTo="$parentbotRightCorner" relativePoint="BOTTOMLEFT" y="0"/>
									</Anchors>
								</Texture>
								<Texture parentKey="leftBorder" name="$parentleftBorder" inherits="!UI-Frame-LeftTile">
									<Anchors>
										<Anchor point="TOP" x="0" y="1" />
										<Anchor point="BOTTOMLEFT" relativeTo="$parentbotLeftCorner" relativePoint="TOPLEFT"/>
									</Anchors>
								</Texture>
								<Texture parentKey="rightBorder" name="$parentrightBorder" inherits="!UI-Frame-RightTile">
									<Anchors>
										<Anchor point="TOP" x="0" y="1" />
										<Anchor point="BOTTOMRIGHT" relativeTo="$parentbotRightCorner" relativePoint="TOPRIGHT" x="1" y="0"/>
									</Anchors>
								</Texture>
								<Texture parentKey="topBorder" name="$parenttopBorder" inherits="_UI-Frame-Bot">
									<Anchors>
										<Anchor point="TOPLEFT" relativePoint="TOPLEFT" x="-2" y="3"/>
										<Anchor point="BOTTOMRIGHT" relativePoint="TOPRIGHT" x="2" y="-3"/>
									</Anchors>
								</Texture>
							</Layer>
						</Layers>
					</Frame>
					<Button name="$parentSearchButton1" inherits="EncounterSearchSMTemplate" parentKey="sbutton1">
						<Anchors>
							<Anchor point="TOPLEFT" relativeTo="$parentsearchPreviewContainer" relativePoint="TOPLEFT" x="0" y="0"/>
							<Anchor point="BOTTOMRIGHT" relativeTo="$parentsearchPreviewContainer" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
						</Anchors>
					</Button>
					<Button name="$parentSearchButton2" inherits="EncounterSearchSMTemplate" parentKey="sbutton2">
						<Anchors>
							<Anchor point="TOPLEFT" relativeTo="$parentSearchButton1" relativePoint="BOTTOMLEFT" x="0" y="0"/>
							<Anchor point="TOPRIGHT" relativeTo="$parentSearchButton1" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
						</Anchors>
					</Button>
					<Button name="$parentSearchButton3" inherits="EncounterSearchSMTemplate" parentKey="sbutton3">
						<Anchors>
							<Anchor point="TOPLEFT" relativeTo="$parentSearchButton2" relativePoint="BOTTOMLEFT" x="0" y="0"/>
							<Anchor point="TOPRIGHT" relativeTo="$parentSearchButton2" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
						</Anchors>
					</Button>
					<Button name="$parentSearchButton4" inherits="EncounterSearchSMTemplate" parentKey="sbutton4">
						<Anchors>
							<Anchor point="TOPLEFT" relativeTo="$parentSearchButton3" relativePoint="BOTTOMLEFT" x="0" y="0"/>
							<Anchor point="TOPRIGHT" relativeTo="$parentSearchButton3" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
						</Anchors>
					</Button>
					<Button name="$parentSearchButton5" inherits="EncounterSearchSMTemplate" parentKey="sbutton5">
						<Anchors>
							<Anchor point="TOPLEFT" relativeTo="$parentSearchButton4" relativePoint="BOTTOMLEFT" x="0" y="0"/>
							<Anchor point="TOPRIGHT" relativeTo="$parentSearchButton4" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
						</Anchors>
					</Button>
					<Button name="$parentShowALL" parentKey="showAllResults">
						<Size x="275" y="24"/>
						<Anchors>
							<Anchor point="LEFT" relativeTo="$parentSearchButton1" x="0" y="0"/>
							<Anchor point="RIGHT" relativeTo="$parentSearchButton1" x="0" y="0"/>
							<Anchor point="TOP" relativeTo="$parentSearchButton5" relativePoint="BOTTOM" x="0" y="0"/>
						</Anchors>
						<Layers>
							<Layer level="OVERLAY">
								<Texture parentKey="selectedTexture" file="Interface\Common\Search" hidden="true">
									<Size x="126" y="27"/>
									<Anchors>
										<Anchor point="TOPLEFT"/>
										<Anchor point="BOTTOMRIGHT"/>
									</Anchors>
									<TexCoords left="0.00195312" right="0.248047" top="0.617188" bottom="0.828125"/>
								</Texture>
							</Layer>
							<Layer level="ARTWORK">
								<FontString name="$parentText" inherits="GameFontNormal" justifyH="LEFT" parentKey="text" text="ENCOUNTER">
									<Size x="0" y="0"/>
									<Anchors>
										<Anchor point="CENTER" x="0" y="0"/>
									</Anchors>
								</FontString>
							</Layer>
						</Layers>
						<NormalTexture inherits="_SearchBarSm">
						</NormalTexture>
						<PushedTexture inherits="_SearchBarSm">
						</PushedTexture>
						<HighlightTexture inherits="UI-EJ-SearchBarHighlightLg">
						</HighlightTexture>
						<Scripts>
							<OnShow>
								self:SetFrameLevel(self:GetParent():GetFrameLevel() + 10)
							</OnShow>
							<OnClick>
								EncounterJournal_ShowFullSearch()
								PlaySound("igMainMenuOptionCheckBoxOn")
							</OnClick>
							<OnEnter function="EncounterJournalSearchBoxShowAllResults_OnEnter"/>
						</Scripts>
					</Button>
					<Frame name="$parentSearchProgress" parentKey="searchProgress" hidden="true">
						<Size x="0" y="24"/>
						<Anchors>
							<Anchor point="LEFT" relativePoint="LEFT"/>
							<Anchor point="RIGHT" relativePoint="RIGHT"/>
							<Anchor point="TOP" relativePoint="BOTTOM"/>
						</Anchors>
						<Layers>
							<Layer level="BACKGROUND">
								<Texture parentKey="background" atlas="_search-rowbg">
									<Anchors>
										<Anchor point="TOPLEFT"/>
										<Anchor point="BOTTOMRIGHT"/>
									</Anchors>
								</Texture>
							</Layer>
						</Layers>
						<Frames>
							<Frame name="$parentLoading" parentKey="loading">
								<Anchors>
									<Anchor point="TOPLEFT" relativePoint="TOPLEFT"/>
									<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT"/>
								</Anchors>
								<Layers>
									<Layer level="OVERLAY">
										<FontString name="$parentText" inherits="GameFontHighlight" justifyH="CENTER" parentKey="text" text="SEARCH_LOADING_TEXT" hidden="false">
											<Size x="0" y="0"/>
											<Anchors>
												<Anchor point="CENTER" x="16" y="0"/>
											</Anchors>
										</FontString>
									</Layer>
								</Layers>
							</Frame>
							<StatusBar name="$parentBar" parentKey="bar">
								<Anchors>
									<Anchor point="TOPLEFT" relativePoint="TOPLEFT" x="4" y="-4"/>
									<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" x="-4" y="6"/>
								</Anchors>
								<Layers>
									<Layer level="BACKGROUND">
										<Texture parentKey="barBackground">
											<Anchors>
												<Anchor point="TOPLEFT"/>
												<Anchor point="BOTTOMRIGHT"/>
											</Anchors>
											<Color r="0" g="0" b="0" a=".4"/>
										</Texture>
									</Layer>
									<Layer level="OVERLAY">
										<FontString parentKey="text" inherits="GameFontHighlightSmall" text="SEARCH_PROGRESS_BAR_TEXT" justifyV="TOP">
											<Size x="0" y="0"/>
											<Anchors>
												<Anchor point="CENTER" x="0" y="0"/>
											</Anchors>
										</FontString>
									</Layer>
									<Layer level="ARTWORK">
										<Texture parentKey="barBorderLeft" name="$parentbarBorderLeft" file="Interface\AchievementFrame\UI-Achievement-ProgressBar-Border">
											<Size x="16" y="0"/>
											<Anchors>
												<Anchor point="TOPLEFT" x="-6" y="5"/>
												<Anchor point="BOTTOMLEFT" x="-6" y="-5"/>
											</Anchors>
											<TexCoords left="0" right="0.0625" top="0" bottom="0.75"/>
										</Texture>
										<Texture parentKey="barBorderRight" name="$parentbarBorderRight" file="Interface\AchievementFrame\UI-Achievement-ProgressBar-Border">
											<Size x="16" y="0"/>
											<Anchors>
												<Anchor point="TOPRIGHT" x="6" y="5"/>
												<Anchor point="BOTTOMRIGHT" x="6" y="-5"/>
											</Anchors>
											<TexCoords left="0.812" right="0.8745" top="0" bottom="0.75"/>
										</Texture>
										<Texture parentKey="barBorderCenter" file="Interface\AchievementFrame\UI-Achievement-ProgressBar-Border">
											<Size x="16"/>
											<Anchors>
												<Anchor point="TOPLEFT" relativeTo="$parentbarBorderLeft" relativePoint="TOPRIGHT"/>
												<Anchor point="BOTTOMRIGHT" relativeTo="$parentbarBorderRight" relativePoint="BOTTOMLEFT"/>
											</Anchors>
											<TexCoords left="0.0625" right="0.812" top="0" bottom="0.75"/>
										</Texture>
									</Layer>
								</Layers>
								<Scripts>
									<OnLoad function="EncounterJournalSearchBoxSearchProgressBar_OnLoad"/>
									<OnShow function="EncounterJournalSearchBoxSearchProgressBar_OnShow"/>
									<OnHide function="EncounterJournalSearchBoxSearchProgressBar_OnHide"/>
								</Scripts>
								<BarTexture file="Interface\TargetingFrame\UI-StatusBar"/>
							</StatusBar>
						</Frames>
						<Scripts>
							<OnShow>
								self:SetFrameLevel(self:GetParent():GetFrameLevel()+10)
							</OnShow>
						</Scripts>
					</Frame>
				</Frames>
				<Scripts>
					<OnLoad function="EncounterJournalSearchBox_OnLoad"/>
					<OnShow function="EncounterJournalSearchBox_OnShow"/>
					<OnHide function="EncounterJournalSearchBox_OnHide"/>
					<OnTextChanged function="EncounterJournalSearchBox_OnTextChanged"/>
					<OnEnterPressed function="EncounterJournalSearchBox_OnEnterPressed"/>
					<OnKeyDown function="EncounterJournalSearchBox_OnKeyDown"/>
					<OnEditFocusLost function="EncounterJournalSearchBox_OnFocusLost"/>
					<OnEditFocusGained function="EncounterJournalSearchBox_OnFocusGained"/>
				</Scripts>
			</EditBox>
			<Frame name="$parentSearchResults" parentKey="searchResults" frameStrata="DIALOG" hidden="true">
				<Size x="600" y="400"/>
				<Anchors>
					<Anchor point="BOTTOM" x="0" y="7"/>
				</Anchors>
				<Layers>
					<Layer level="BACKGROUND">
						<Texture name="$parentBg" file="Interface\FrameGeneral\UI-Background-Rock" horizTile="true" vertTile="true">
							<Anchors>
								<Anchor point="TOPLEFT" x="0" y="0"/>
								<Anchor point="BOTTOMRIGHT" x="0" y="0"/>
							</Anchors>
							<Color r="0.9" g="0.8" b="0.7" a="1"/>
						</Texture>
					</Layer>
					<Layer level="ARTWORK">
						<FontString name="$parentTitleText" inherits="GameFontNormal" text="" parentKey="TitleText">
							<Anchors>
								<Anchor point="TOP" x="0" y="-7"/>
								<Anchor point="LEFT" x="60"/>
								<Anchor point="RIGHT" x="-60"/>
							</Anchors>
						</FontString>
						<Texture name="$parentTopLeftCorner" inherits="UI-Frame-TopCornerLeft">
							<Anchors>
								<Anchor point="TOPLEFT" x="-7" y="4"/>
							</Anchors>
						</Texture>
						<Texture name="$parentTopRightCorner" inherits="UI-Frame-TopCornerRightSimple">
							<Anchors>
								<Anchor point="TOPRIGHT" x="4" y="4"/>
							</Anchors>
						</Texture>
						<Texture name="$parentTopBorder" inherits="_UI-Frame-Top">
							<Anchors>
								<Anchor point="TOPLEFT" relativeTo="$parentTopLeftCorner" relativePoint="TOPRIGHT" y="0"/>
								<Anchor point="TOPRIGHT" relativeTo="$parentTopRightCorner" relativePoint="TOPLEFT" y="0"/>
							</Anchors>
						</Texture>
						<Texture name="$parentLeftBorder" inherits="!UI-Frame-LeftTile" parentKey="leftBorderBar">
							<Anchors>
								<Anchor point="BOTTOM" x="0" y="0" />
								<Anchor point="TOPLEFT" relativeTo="$parentTopLeftCorner" relativePoint="BOTTOMLEFT"/>
							</Anchors>
						</Texture>
						<Texture name="$parentRightBorder" inherits="!UI-Frame-RightTile">
							<Anchors>
								<Anchor point="BOTTOM" x="0" y="0" />
								<Anchor point="TOPRIGHT" relativeTo="$parentTopRightCorner" relativePoint="BOTTOMRIGHT" x="1" y="0"/>
							</Anchors>
						</Texture>
					</Layer>
					<Layer level="BORDER">
						<Texture name="$parentTopTileStreaks" inherits="_UI-Frame-TopTileStreaks">
							<Anchors>
								<Anchor point="TOPLEFT" x="0" y="0"/>
								<Anchor point="TOPRIGHT" x="0" y="0"/>
							</Anchors>
						</Texture>
					</Layer>
					<Layer level="OVERLAY">
						<Texture name="$parentTopLeftCorner2" inherits="UI-Frame-TopCornerLeft">
							<Anchors>
								<Anchor point="TOPLEFT" x="-7" y="-20"/>
							</Anchors>
						</Texture>
						<Texture name="$parentTopRightCorner2" inherits="UI-Frame-TopCornerRightSimple">
							<Anchors>
								<Anchor point="TOPRIGHT" x="4" y="-20"/>
							</Anchors>
						</Texture>
						<Texture name="$parentTopBorder2" inherits="_UI-Frame-Top">
							<Anchors>
								<Anchor point="TOPLEFT" relativeTo="$parentTopLeftCorner2" relativePoint="TOPRIGHT" y="0"/>
								<Anchor point="TOPRIGHT" relativeTo="$parentTopRightCorner2" relativePoint="TOPLEFT" y="0"/>
							</Anchors>
						</Texture>
					</Layer>
				</Layers>
				<Frames>
					<Button name="$parentCloseButton" inherits="UIPanelCloseButton">
						<Anchors>
							<Anchor point="TOPRIGHT" x="7" y="2"/>
						</Anchors>
						<Scripts>
							<OnClick>
								self:GetParent():Hide()
							</OnClick>
						</Scripts>
					</Button>
					<ScrollFrame name="$parentScrollFrame" parentKey="scrollFrame" inherits="HybridScrollFrameTemplate">
						<Size x="578" y="371"/>
						<Anchors>
							<Anchor point="BOTTOMLEFT" x="1" y="1"/>
						</Anchors>
						<Frames>
							<Slider name="$parentScrollBar" parentKey="scrollBar" inherits="HybridScrollBarTrimTemplate">
								<Anchors>
									<Anchor point="TOPLEFT" relativePoint="TOPRIGHT" x="0" y="-16"/>
									<Anchor point="BOTTOMLEFT" relativePoint="BOTTOMRIGHT" x="0" y="14"/>
								</Anchors>
								<Scripts>
									<OnLoad>
										self.trackBG:Show()
										self.trackBG:SetVertexColor(0, 0, 0, 1)
									</OnLoad>
								</Scripts>
							</Slider>
						</Frames>
					</ScrollFrame>
				</Frames>
				<Scripts>
					<OnShow>
						--always on top
						self:SetFrameLevel(self:GetParent():GetFrameLevel()+10)
						PlaySound("igSpellBookOpen")
					</OnShow>
					<OnHide>
						PlaySound("igSpellBookClose")
					</OnHide>
				</Scripts>
			</Frame>
			<Frame name="$parentNavBar" inherits="NavBarTemplate" parentKey="navBar">
				<Size x="500" y="34"/>
				<Anchors>
					<Anchor point="TOPLEFT" x="61" y="-22"/>
				</Anchors>
				<Layers>
					<Layer level="BORDER">
						<Texture name="$parentInsetBotLeftCorner" inherits="UI-Frame-InnerBotLeftCorner" parentKey="InsetBorderBottomLeft">
							<Anchors>
								<Anchor point="BOTTOMLEFT"  x="-3" y="-3"/>
							</Anchors>
						</Texture>
						<Texture name="$parentInsetBotRightCorner" inherits="UI-Frame-InnerBotRight" parentKey="InsetBorderBottomRight">
							<Anchors>
								<Anchor point="BOTTOMRIGHT"  x="3" y="-3"/>
							</Anchors>
						</Texture>
						<Texture name="$parentInsetBottomBorder" inherits="_UI-Frame-InnerBotTile" parentKey="InsetBorderBottom">
							<Anchors>
								<Anchor point="BOTTOMLEFT" relativeTo="$parentInsetBotLeftCorner" relativePoint="BOTTOMRIGHT"/>
								<Anchor point="BOTTOMRIGHT" relativeTo="$parentInsetBotRightCorner" relativePoint="BOTTOMLEFT"/>
							</Anchors>
						</Texture>
						<Texture name="$parentInsetLeftBorder" inherits="!UI-Frame-InnerLeftTile" parentKey="InsetBorderLeft">
							<Anchors>
								<Anchor point="TOPLEFT" x="-3" y="0"/>
								<Anchor point="BOTTOMLEFT" relativeTo="$parentInsetBotLeftCorner" relativePoint="TOPLEFT"/>
							</Anchors>
						</Texture>
						<Texture name="$parentInsetRightBorder" inherits="!UI-Frame-InnerRightTile" parentKey="InsetBorderRight">
							<Anchors>
								<Anchor point="TOPRIGHT"  x="3" y="0"/>
								<Anchor point="BOTTOMRIGHT" relativeTo="$parentInsetBotRightCorner" relativePoint="TOPRIGHT"/>
							</Anchors>
						</Texture>
					</Layer>
				</Layers>
			</Frame>
			<Frame name="$parentInset" inherits="InsetFrameTemplate" parentKey="inset">
				<Anchors>
					<Anchor point="TOPRIGHT" x="-4" y="-60" />
					<Anchor point="BOTTOMLEFT" x="4" y="5"/>
				</Anchors>
			</Frame>
			<Frame name="$parentInstanceSelect" parentKey="instanceSelect" hidden="false">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentInset" x="0" y="-2" />
					<Anchor point="BOTTOMRIGHT" relativeTo="$parentInset" x="-3" y="0"/>
				</Anchors>
				<Layers>
					<Layer level="ARTWORK">
						<Texture name="$parentBG" file="Interface\EncounterJournal\UI-EJ-Classic" parentKey="bg">
							<Anchors>
								<Anchor point="TOPLEFT" x="0" y="0"/>
								<Anchor point="BOTTOMRIGHT" x="0" y="0"/>
							</Anchors>
						</Texture>
					</Layer>
				</Layers>
				<Frames>
					<Button name="$parentSuggestTab" inherits="EncounterTierTabTemplate" text="AJ_SUGGESTED_CONTENT_TAB" parentKey="suggestTab" id="1">
						<Anchors>
							<Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT" x="25" y="-45"/>
						</Anchors>
						<Scripts>
							<OnClick function="EJ_ContentTab_OnClick"/>
						</Scripts>
					</Button>
					<Button name="$parentDungeonTab" inherits="EncounterTierTabTemplate" text="INSTANCE" parentKey="dungeonsTab" id="2">
						<KeyValues>
 							<KeyValue key="id" value="2" type="number"/>
 						</KeyValues>
						<Anchors>
							<Anchor point="BOTTOMLEFT" relativeTo="$parentSuggestTab" relativePoint="BOTTOMRIGHT" x="35" y="0"/>
						</Anchors>
						<Scripts>
							<OnClick function="EJ_ContentTab_OnClick"/>
						</Scripts>
					</Button>
					<Button name="$parentRaidTab" inherits="EncounterTierTabTemplate" text="RAIDS" parentKey="raidsTab" id="3">
						<KeyValues>
 							<KeyValue key="id" value="3" type="number"/>
 						</KeyValues>
						<Anchors>
							<Anchor point="BOTTOMLEFT" relativeTo="$parentDungeonTab" relativePoint="BOTTOMRIGHT" x="35" y="0"/>
						</Anchors>
						<Scripts>
							<OnClick function="EJ_ContentTab_OnClick"/>
						</Scripts>
					</Button>
					<Button name="$parentLootJournalTab" inherits="EncounterTierTabTemplate" text="LOOTJOURNAL_ITEM_SETS" parentKey="LootJournalTab" id="4">
						<Anchors>
							<Anchor point="BOTTOMLEFT" relativeTo="$parentRaidTab" relativePoint="BOTTOMRIGHT" x="35" y="0"/>
						</Anchors>
						<Scripts>
							<OnClick function="EJ_ContentTab_OnClick"/>
						</Scripts>
					</Button>
					<Frame name="$parentTierDropDown" parentKey="tierDropDown" inherits="UIDropDownMenuTemplate">
						<Size x="156" y="32"/>
						<Anchors>
							<Anchor point="TOPRIGHT" x="0" y="-10"/>
						</Anchors>
						<Scripts>
							<OnShow>
								UIDropDownMenu_SetWidth(self, 156)
								UIDropDownMenu_JustifyText(self, "LEFT")
								UIDropDownMenu_Initialize(self, EJTierDropDown_Initialize)
							</OnShow>
						</Scripts>
					</Frame>
					<ScrollFrame name="$parentScrollFrame" parentKey="scroll" inherits="UIPanelScrollFrameCodeTemplate">
						<Size x="785" y="377"/>
						<Anchors>
							<Anchor point="TOPLEFT" x="5" y="-49"/>
						</Anchors>
						<Frames>
							<Slider name="$parentScrollBar" inherits="MinimalScrollBarTemplate" parentKey="ScrollBar">
								<Anchors>
									<Anchor point="TOPRIGHT" x="0" y="-17"/>
									<Anchor point="BOTTOMRIGHT" x="0" y="17"/>
								</Anchors>
								<Scripts>
									<OnLoad>
										self.trackBG:SetVertexColor(0.2, 0.13, 0.08, 0.25)
									</OnLoad>
								</Scripts>
							</Slider>
						</Frames>
						<ScrollChild>
							<Frame name="$parentScrollChild" parentKey="child">
								<Size x="785" y="375"/>
								<Anchors>
									<Anchor point="TOPLEFT" x="0" y="0"/>
								</Anchors>
								<Frames>
									<Button name="$parentInstanceButton1" inherits="EncounterInstanceButtonTemplate" parentKey="instance1">
										<Anchors>
											<Anchor point="TOPLEFT" x="12" y="-10"/>
										</Anchors>
									</Button>
								</Frames>
							</Frame>
						</ScrollChild>
					</ScrollFrame>
				</Frames>
			</Frame>
			<Frame name="$parentEncounterFrame" parentKey="encounter" hidden="true">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentInset" x="0" y="0" />
					<Anchor point="BOTTOMRIGHT" relativeTo="$parentInset" x="-3" y="0"/>
				</Anchors>
				<Frames>
					<Frame name="$parentInstanceFrame" parentKey="instance">
						<Size x="390" y="425"/>
						<Anchors>
							<Anchor point="BOTTOMRIGHT" x="-1" y="2"/>
						</Anchors>
						<Layers>
							<Layer level="BACKGROUND">
								<Texture name="$parentBG" file="Interface\EncounterJournal\UI-EJ-LOREBG-Default" parentKey="loreBG">
									<Size x="390" y="336"/>
									<Anchors>
										<Anchor point="TOP" x="3" y="-9"/>
									</Anchors>
									<TexCoords left="0" right="0.7617187" top="0" bottom="0.65625"/>
								</Texture>
							</Layer>
							<Layer level="OVERLAY">
								<FontString name="$parentTitle" inherits="QuestFont_Super_Huge" justifyH="CENTER" justifyV="BOTTOM" parentKey="title">
									<Size x="320" y="10"/>
									<Anchors>
										<Anchor point="TOP" x="0" y="-72"/>
									</Anchors>
								</FontString>
							</Layer>
							<Layer level="ARTWORK">
								<Texture inherits="UI-EJ-DungeonNameBg" parentKey="titleBG">
									<Anchors>
										<Anchor point="TOP" relativeTo="$parentBG" x="0" y="-38"/>
									</Anchors>
								</Texture>
							</Layer>
						</Layers>
						<Frames>
							<Button name="$parentMapButton" parentKey="mapButton">
								<Size x="48" y="32"/>
								<Anchors>
									<Anchor point="BOTTOMLEFT" x="33" y="126"/>
								</Anchors>
								<Layers>
									<Layer level="BACKGROUND">
										<Texture name="$parentShadow" inherits="UI-EJ-ShowMapBG">
											<Anchors>
												<Anchor point="LEFT" x="-3" y="5"/>
											</Anchors>
										</Texture>
									</Layer>
									<Layer level="ARTWORK">
										<FontString name="$parentText" parentKey="Text" font="GameFontNormal" justifyH="LEFT">
											<Size x="0" y="0"/>
											<Anchors>
												<Anchor point="LEFT" relativePoint="RIGHT" x="2" y="0"/>
											</Anchors>
										</FontString>
										<Texture name="$parentTexture" file="Interface\QuestFrame\UI-QuestMap_Button" parentKey="texture">
											<Size x="48" y="32"/>
											<Anchors>
												<Anchor point="RIGHT"/>
											</Anchors>
											<TexCoords left="0.125" right="0.875" top="0.0" bottom="0.5"/>
										</Texture>
									</Layer>
									<Layer level="HIGHLIGHT">
										<Texture name="$parentHighlight" file="Interface\BUTTONS\ButtonHilight-Square" alphaMode="ADD">
											<Size x="36" y="25"/>
											<Anchors>
												<Anchor point="RIGHT" x="-7" y="0"/>
											</Anchors>
										</Texture>
									</Layer>
								</Layers>
								<Scripts>
									<OnClick>
										if self.dungeonAreaMapID and self.dungeonAreaMapID > 0 then
											WorldMapFrame.fromJournal = true
											ShowUIPanel(WorldMapFrame)
											SetMapByID(self.dungeonAreaMapID)
										end
									</OnClick>
									<OnMouseDown>
										self.texture:SetTexCoord(0.125, 0.875, 0.5, 1.0)
									</OnMouseDown>
									<OnMouseUp>
										self.texture:SetTexCoord(0.125, 0.875, 0.0, 0.5)
									</OnMouseUp>
								</Scripts>
							</Button>
							<ScrollFrame name="$parentLoreScrollFrame" parentKey="loreScroll" inherits="UIPanelScrollFrameCodeTemplate">
								<Size x="315" y="102"/>
								<Anchors>
									<Anchor point="BOTTOM" x="0" y="5"/>
								</Anchors>
								<Frames>
									<Slider name="$parentScrollBar" inherits="MinimalScrollBarTemplate" parentKey="ScrollBar">
										<Anchors>
											<Anchor point="TOPLEFT" relativePoint="TOPRIGHT" x="0" y="-17"/>
											<Anchor point="BOTTOMLEFT" relativePoint="BOTTOMRIGHT" x="0" y="17"/>
										</Anchors>
										<Scripts>
											<OnLoad>
												self.trackBG:SetVertexColor(0.2, 0.13, 0.08, 0.25)
											</OnLoad>
										</Scripts>
									</Slider>
								</Frames>
								<ScrollChild>
									<Frame name="$parentScrollChild" parentKey="child">
										<Size x="315" y="102"/>
										<Anchors>
											<Anchor point="TOPLEFT" x="0" y="0"/>
										</Anchors>
										<Layers>
											<Layer level="ARTWORK">
												<FontString name="$parentLore" inherits="GameFontBlack" justifyH="LEFT" parentKey="lore">
													<Size x="300" y="0"/>
													<Anchors>
														<Anchor point="TOPLEFT" x="5" y="-5"/>
													</Anchors>
													<Color r="0.13" g="0.07" b=".01" a="1"/>
												</FontString>
											</Layer>
										</Layers>
									</Frame>
								</ScrollChild>
							</ScrollFrame>
						</Frames>
					</Frame>
					<Frame name="$parentInfo" parentKey="info">
						<Size x="785" y="425"/>
						<Anchors>
							<Anchor point="BOTTOMRIGHT" x="-1" y="2"/>
						</Anchors>
						<Layers>
							<Layer level="ARTWORK">
								<Texture name="$parentBG" file="Interface\EncounterJournal\UI-EJ-JournalBG">
									<Size x="785" y="425"/>
									<Anchors>
										<Anchor point="BOTTOMRIGHT" x="0" y="0"/>
									</Anchors>
									<TexCoords left="0" right="0.766601562" top="0" bottom="0.830078125"/>
								</Texture>
							</Layer>
							<Layer level="OVERLAY">
								<Texture name="$parentLeftHeaderShadow" inherits="UI-EJ-LeftPageHeader" parentKey="leftShadow">
									<Anchors>
										<Anchor point="TOPLEFT" x="0" y="-11"/>
									</Anchors>
								</Texture>
								<Texture name="$parentRightHeaderShadow" inherits="UI-EJ-RightPageHeader" parentKey="rightShadow" hidden="true">
									<Anchors>
										<Anchor point="TOPRIGHT" x="0" y="-11"/>
									</Anchors>
								</Texture>
							</Layer>
						</Layers>
						<Frames>
							<Frame parentKey="TitleFrame" setAllPoints="true" toplevel="true">
								<Layers>
									<Layer level="OVERLAY">
										<FontString name="$parentEncounterTitle" inherits="GameFontNormalLarge" justifyH="LEFT" parentKey="encounterTitle">
											<Size x="227" y="12"/>
											<Anchors>
												<Anchor point="BOTTOMLEFT" relativePoint="TOPRIGHT" x="-350" y="-36"/>
											</Anchors>
											<Color r="0.902" g="0.788" b="0.671"/>
										</FontString>
										<FontString name="$parentInstanceTitle" inherits="GameFontNormalLarge" justifyH="LEFT" parentKey="instanceTitle">
											<Size x="290" y="12"/>
											<Anchors>
												<Anchor point="TOPLEFT" x="65" y="-20"/>
											</Anchors>
											<Color r="0.902" g="0.788" b="0.671"/>
										</FontString>
									</Layer>
								</Layers>
							</Frame>
							<Button name="$parentInstanceButton" motionScriptsWhileDisabled="true" toplevel="true" parentKey="instanceButton">
								<Size x="64" y="61"/>
								<Anchors>
									<Anchor point="TOPLEFT" x="0" y="-3"/>
								</Anchors>
								<Layers>
									<Layer level="BACKGROUND" textureSubLevel="6">
										<Texture name="$parentIcon" parentKey="icon">
											<Size x="40" y="40"/>
											<Anchors>
												<Anchor point="CENTER" x="0" y="0"/>
											</Anchors>
										</Texture>
									</Layer>
								</Layers>
								<NormalTexture inherits="UI-EJ-BossModelButton"/>
								<HighlightTexture inherits="UI-EJ-BossModelButton" alphaMode="ADD"/>
								<Scripts>
									<OnClick function="EncounterJournalInstanceButton_OnClick"/>
								</Scripts>
							</Button>
							<Button name="$parentOverviewTab" inherits="EncounterTabTemplate" parentKey="overviewTab" id="1">
								<Anchors>
									<Anchor point="TOPLEFT" relativePoint="TOPRIGHT" x="-12" y="-35"/>
								</Anchors>
								<Layers>
									<Layer level="OVERLAY">
										<Texture name="$parentUnselect" inherits="UI-EJ-Tab-BossIcon-UnSelected" parentKey="unselected">
											<Anchors>
												<Anchor point="RIGHT" x="-6" y="0"/>
											</Anchors>
										</Texture>
										<Texture name="$parentSelect" inherits="UI-EJ-Tab-BossIcon-Selected" parentKey="selected">
											<Anchors>
												<Anchor point="CENTER" relativeTo="$parentUnselect" x="0" y="0"/>
											</Anchors>
										</Texture>
									</Layer>
								</Layers>
								<Scripts>
									<OnLoad>
										self.tooltip = OVERVIEW
									</OnLoad>
									<OnClick>
										EncounterJournal_TabClicked(self, button)
										if (not EncounterJournal.encounterID and EncounterJournal.instanceID) then
											EncounterJournal_DisplayInstance(EncounterJournal.instanceID, true)
										end
									</OnClick>
								</Scripts>
							</Button>
							<Button name="$parentLootTab" inherits="EncounterTabTemplate" parentKey="lootTab" id="2">
								<Anchors>
									<Anchor point="TOP" relativeTo="$parentOverviewTab" relativePoint="BOTTOM" x="0" y="2"/>
								</Anchors>
								<Layers>
									<Layer level="OVERLAY">
										<Texture name="$parentUnselect" inherits="UI-EJ-Tab-LootIcon-UnSelected" parentKey="unselected">
											<Anchors>
												<Anchor point="RIGHT" x="-6" y="0"/>
											</Anchors>
										</Texture>
										<Texture name="$parentSelect" inherits="UI-EJ-Tab-LootIcon-Selected" parentKey="selected">
											<Anchors>
												<Anchor point="CENTER" relativeTo="$parentUnselect" x="0" y="0"/>
											</Anchors>
										</Texture>
									</Layer>
								</Layers>
								<Scripts>
									<OnLoad>
										self.tooltip = LOOT_NOUN
									</OnLoad>
								</Scripts>
							</Button>
							<Button name="$parentBossTab" inherits="EncounterTabTemplate" parentKey="bossTab" id="3">
								<Anchors>
									<Anchor point="TOP" relativeTo="$parentLootTab" relativePoint="BOTTOM" x="0" y="2"/>
								</Anchors>
								<Layers>
									<Layer level="OVERLAY">
										<Texture name="$parentUnselect" inherits="UI-EJ-Tab-AbilitiesIcon-UnSelected" parentKey="unselected">
											<Anchors>
												<Anchor point="RIGHT" x="-6" y="0"/>
											</Anchors>
										</Texture>
										<Texture name="$parentSelect" inherits="UI-EJ-Tab-AbilitiesIcon-Selected" parentKey="selected">
											<Anchors>
												<Anchor point="CENTER" relativeTo="$parentUnselect" x="0" y="0"/>
											</Anchors>
										</Texture>
									</Layer>
								</Layers>
								<Scripts>
									<OnLoad>
										self.tooltip = ABILITIES
									</OnLoad>
									<OnClick>
										EncounterJournal_TabClicked(self, button)
										if (not EncounterJournal.encounterID and EncounterJournal.instanceID) then
											EncounterJournal_DisplayInstance(EncounterJournal.instanceID, true)
										end
									</OnClick>
								</Scripts>
							</Button>
							<Button name="$parentModelTab" inherits="EncounterTabTemplate" parentKey="modelTab" id="4">
								<Anchors>
									<Anchor point="TOP" relativeTo="$parentBossTab" relativePoint="BOTTOM" x="0" y="2"/>
								</Anchors>
								<Layers>
									<Layer level="OVERLAY">
										<Texture name="$parentUnselect" inherits="UI-EJ-Tab-ModelIcon-UnSelected" parentKey="unselected">
											<Anchors>
												<Anchor point="RIGHT" x="-6" y="0"/>
											</Anchors>
										</Texture>
										<Texture name="$parentSelect" inherits="UI-EJ-Tab-ModelIcon-Selected" parentKey="selected">
											<Anchors>
												<Anchor point="CENTER" relativeTo="$parentUnselect" x="0" y="0"/>
											</Anchors>
										</Texture>
									</Layer>
								</Layers>
								<Scripts>
									<OnLoad>
										self.tooltip = MODEL
									</OnLoad>
									<OnClick>
										EncounterJournal_TabClicked(self, button)
										EncounterJournal_ShowCreatures()
									</OnClick>
								</Scripts>
							</Button>
							<ScrollFrame name="$parentBossesScrollFrame" parentKey="bossesScroll" inherits="UIPanelScrollFrameCodeTemplate">
								<Size x="363" y="382"/>
								<Anchors>
									<Anchor point="BOTTOMLEFT" x="25" y="1"/>
								</Anchors>
								<Frames>
									<Slider name="$parentScrollBar" inherits="MinimalScrollBarTemplate" parentKey="ScrollBar">
										<Anchors>
											<Anchor point="TOPRIGHT" x="0" y="-17"/>
											<Anchor point="BOTTOMRIGHT" x="0" y="17"/>
										</Anchors>
										<Scripts>
											<OnLoad>
												self.trackBG:SetVertexColor(0.2, 0.13, 0.08, 0.25)
											</OnLoad>
										</Scripts>
									</Slider>
								</Frames>
								<ScrollChild>
									<Frame name="$parentScrollChild" parentKey="child">
										<Size x="320" y="372"/>
										<Anchors>
											<Anchor point="TOPLEFT" x="0" y="0"/>
										</Anchors>
										<Layers>
											<Layer level="ARTWORK">
												<FontString name="$parentDescription" inherits="GameFontBlack" justifyH="LEFT" parentKey="description">
													<Size x="0" y="0"/>
													<Anchors>
														<Anchor point="TOPLEFT" x="2" y="-8"/>
													</Anchors>
													<Color r="0.25" g="0.1484375" b=".02" a="1"/>
												</FontString>
											</Layer>
										</Layers>
									</Frame>
								</ScrollChild>
							</ScrollFrame>
							<Button name="$parentDifficulty" parentKey="difficulty" inherits="EJButtonTemplate" frameLevel="10">
								<Size x="75" y="26"/>
								<Anchors>
									<Anchor point="TOPRIGHT" x="-19" y="-13"/>
								</Anchors>
								<Scripts>
									<OnClick>
										ToggleDropDownMenu(1, nil, self:GetParent().difficultyDD, self, 5, 0)
										PlaySound("igMainMenuOptionCheckBoxOn")
									</OnClick>
								</Scripts>
							</Button>
							<Frame name="$parentDifficultyDD" parentKey="difficultyDD" inherits="UIDropDownMenuTemplate" clampedToScreen="true" hidden="true">
								<Scripts>
									<OnLoad>
										UIDropDownMenu_Initialize(self, EncounterJournal_DifficultyInit, "MENU")
									</OnLoad>
								</Scripts>
							</Frame>
							<Button name="$parentResetButton" parentKey="reset" hidden="true">
								<Size x="26" y="26"/>
								<Anchors>
									<Anchor point="RIGHT" relativeTo="$parentDifficulty" relativePoint="LEFT" x="-10" y="0"/>
								</Anchors>
								<Layers>
									<Layer level="OVERLAY">
										<Texture name="$parentTexture" inherits="UI-EJ-ReturnToDefault">
											<Anchors>
												<Anchor point="CENTER"/>
											</Anchors>
										</Texture>
									</Layer>
								</Layers>
								<NormalTexture inherits="UI-EJ-FilterButtonUp"/>
								<PushedTexture inherits="UI-EJ-FilterButtonDown"/>
								<HighlightTexture inherits="UI-EJ-FilterButtonHighlight" alphaMode="ADD"/>
								<Scripts>
									<OnMouseDown>
										_G[self:GetName().."Texture"]:SetPoint("CENTER", 1, -1)
									</OnMouseDown>
									<OnMouseUp>
										_G[self:GetName().."Texture"]:SetPoint("CENTER", 0, 0)
									</OnMouseUp>
									<OnClick function="EncounterJournal_ResetHeaders"/>
									<OnEnter>
										GameTooltip:SetOwner(self, "ANCHOR_RIGHT")
										GameTooltip:SetText(RETURN_TO_DEFAULT)
									</OnEnter>
									<OnLeave>
										GameTooltip:Hide()
									</OnLeave>
								</Scripts>
							</Button>
							<ScrollFrame name="$parentDetailsScrollFrame" parentKey="detailsScroll" inherits="UIPanelScrollFrameCodeTemplate">
								<Size x="350" y="383"/>
								<Anchors>
									<Anchor point="BOTTOMRIGHT" x="-5" y="1"/>
								</Anchors>
								<Frames>
									<Slider name="$parentScrollBar" inherits="MinimalScrollBarTemplate" parentKey="ScrollBar">
										<Anchors>
											<Anchor point="TOPRIGHT" x="0" y="-17"/>
											<Anchor point="BOTTOMRIGHT" x="0" y="17"/>
										</Anchors>
										<Scripts>
											<OnLoad>
												self.trackBG:SetVertexColor(0.2, 0.13, 0.08, 0.25)
											</OnLoad>
										</Scripts>
									</Slider>
								</Frames>
								<ScrollChild>
									<Frame name="$parentScrollChild" parentKey="child">
										<Size x="320" y="372"/>
										<Anchors>
											<Anchor point="TOPLEFT" x="0" y="0"/>
										</Anchors>
										<Layers>
											<Layer level="ARTWORK">
												<FontString name="$parentDescription" inherits="GameFontBlack" justifyH="LEFT" parentKey="description">
													<Size x="0" y="0"/>
													<Anchors>
														<Anchor point="TOPLEFT" x="2" y="-8"/>
													</Anchors>
													<Color r="0.25" g="0.1484375" b=".02" a="1"/>
												</FontString>
											</Layer>
										</Layers>
									</Frame>
								</ScrollChild>
								<Scripts>
									<OnShow>
										EncounterJournal_HideCreatures()
										EncounterJournal.encounter.info.reset:Show()
										EncounterJournal.encounter.info.lootScroll:Hide()
										EncounterJournal.encounter.info.rightShadow:Show()
										EncounterJournal.encounter.info.TitleFrame.encounterTitle:Show()
									</OnShow>
									<OnHide>
										if (not self:GetParent().overviewScroll:IsShown()) then
											EncounterJournal.encounter.info.reset:Hide()
										end
									</OnHide>
								</Scripts>
							</ScrollFrame>
							<ScrollFrame name="$parentOverviewScrollFrame" parentKey="overviewScroll" inherits="UIPanelScrollFrameCodeTemplate">
								<Size x="350" y="383"/>
								<Anchors>
									<Anchor point="BOTTOMRIGHT" x="-5" y="1"/>
								</Anchors>
								<Frames>
									<Slider name="$parentScrollBar" inherits="MinimalScrollBarTemplate" parentKey="ScrollBar">
										<Anchors>
											<Anchor point="TOPRIGHT" x="0" y="-17"/>
											<Anchor point="BOTTOMRIGHT" x="0" y="17"/>
										</Anchors>
										<Scripts>
											<OnLoad>
												self.trackBG:SetVertexColor(0.2, 0.13, 0.08, 0.25)
											</OnLoad>
										</Scripts>
									</Slider>
								</Frames>
								<ScrollChild>
									<Frame name="$parentScrollChild" parentKey="child">
										<Size x="320" y="372"/>
										<Anchors>
											<Anchor point="TOPLEFT" x="0" y="0"/>
										</Anchors>
										<Layers>
											<Layer level="ARTWORK">
												<FontString name="$parentLoreDescription" inherits="GameFontBlack" justifyH="LEFT" parentKey="loreDescription">
													<Size x="0" y="0"/>
													<Anchors>
														<Anchor point="TOPLEFT" x="2" y="-8"/>
													</Anchors>
													<Color r="0.25" g="0.1484375" b=".02" a="1"/>
												</FontString>
												<Texture name="$parentHeader" inherits="UI-EJ-Header-Overview" parentKey="header">
													<Anchors>
														<Anchor point="TOP" relativeTo="$parentLoreDescription" relativePoint="BOTTOM" x="0" y="-6"/>
													</Anchors>
												</Texture>
												<FontString name="$parentTitle" inherits="GameFontNormal" justifyH="LEFT" text="OVERVIEW">
													<Size x="200" y="10"/>
													<Anchors>
														<Anchor point="BOTTOMLEFT" relativeTo="$parentHeader" relativePoint="BOTTOMLEFT" x="8" y="6"/>
													</Anchors>
													<Color r="0.929" g="0.788" b="0.620"/>
												</FontString>
											</Layer>
										</Layers>
										<Frames>
											<Frame parentKey="overviewDescription" inherits="EncounterDescriptionTemplate">
												<Size x="95" y="10"/>
												<Anchors>
													<Anchor point="TOP" relativeTo="$parentHeader" relativePoint="BOTTOM" x="0" y="-6"/>
												</Anchors>
											</Frame>
										</Frames>
									</Frame>
								</ScrollChild>
								<Scripts>
									<OnShow>
										EncounterJournal_HideCreatures()
										EncounterJournal.encounter.info.reset:Show()
										EncounterJournal.encounter.info.lootScroll:Hide()
										EncounterJournal.encounter.info.rightShadow:Show()
										EncounterJournal.encounter.info.TitleFrame.encounterTitle:Show()
									</OnShow>
									<OnHide>
										if (not self:GetParent().detailsScroll:IsShown()) then
											EncounterJournal.encounter.info.reset:Hide()
										end
									</OnHide>
								</Scripts>
							</ScrollFrame>
							<ScrollFrame name="$parentLootScrollFrame" parentKey="lootScroll" inherits="HybridScrollFrameTemplate">
								<Size x="345" y="382"/>
								<Anchors>
									<Anchor point="BOTTOMRIGHT" x="-5" y="1"/>
								</Anchors>
								<Frames>
									<Frame name="$parentClassFilterClearFrame" parentKey="classClearFilter" hidden="true" enableMouse="true">
										<Size x="355" y="28"/>
										<Anchors>
											<Anchor point="BOTTOM" relativePoint="TOP" x="-10" y="-5"/>
										</Anchors>
										<Layers>
											<Layer level="BACKGROUND">
												<Texture inherits="UI-EJ-FilterBar">
													<Size x="380" y="28"/>
													<Anchors>
														<Anchor point="CENTER" x="-5" y="0"/>
													</Anchors>
												</Texture>
											</Layer>
											<Layer level="OVERLAY">
												<FontString inherits="GameFontNormalSmall" parentKey="text">
													<Size x="0" y="0"/>
													<Anchors>
														<Anchor point="LEFT" x="25" y="2"/>
													</Anchors>
													<Color r="0.973" g="0.902" b="0.581"/>
												</FontString>
											</Layer>
										</Layers>
										<Frames>
											<Button name="$parentExitButton">
												<Size x="20" y="20"/>
												<Anchors>
													<Anchor point="RIGHT" x="-20" y="2"/>
												</Anchors>
												<Layers>
													<Layer level="ARTWORK">
														<Texture file="Interface\FriendsFrame\ClearBroadcastIcon" alpha="0.8" parentKey="texture">
															<Size x="17" y="17"/>
															<Anchors>
																<Anchor point="TOPLEFT" x="0" y="0"/>
															</Anchors>
														</Texture>
													</Layer>
												</Layers>
												<Scripts>
													<OnEnter>
														self.texture:SetAlpha(1.0)
													</OnEnter>
													<OnLeave>
														self.texture:SetAlpha(0.8)
													</OnLeave>
													<OnMouseDown>
														self.texture:SetPoint("TOPLEFT", 1, -1)
													</OnMouseDown>
													<OnMouseUp>
														self.texture:SetPoint("TOPLEFT", 0, 0)
													</OnMouseUp>
													<OnClick>
														PlaySound("igMainMenuOptionCheckBoxOn")
														<!-- EJ_ResetLootFilter() -->
														EJ_SetLootFilter(0)
														EncounterJournal_LootUpdate()
														self:GetParent():Hide()
													</OnClick>
												</Scripts>
											</Button>
										</Frames>
									</Frame>
									<Button name="$parentFilterToggle" parentKey="filter" text="CLASS" inherits="EJButtonTemplate">
										<Scripts>
											<OnClick>
												ToggleDropDownMenu(1, nil, self:GetParent().lootFilter, self, 5, 0)
												PlaySound("igMainMenuOption")
											</OnClick>
										</Scripts>
									</Button>
									<Button name="$parentSlotFilterToggle" parentKey="slotFilter" text="ALL_INVENTORY_SLOTS" inherits="EJButtonTemplate">
										<Anchors>
											<Anchor point="LEFT" relativeTo="$parentFilterToggle" relativePoint="RIGHT" x="10" y="0"/>
										</Anchors>
										<Scripts>
											<OnClick>
												ToggleDropDownMenu(1, nil, self:GetParent().lootSlotFilter, self, 5, 0)
												PlaySound("igMainMenuOption")
											</OnClick>
										</Scripts>
									</Button>
									<Frame name="$parentLootFilter" inherits="UIDropDownMenuTemplate" parentKey="lootFilter" hidden="true"/>
									<Frame name="$parentLootSlotFilter" inherits="UIDropDownMenuTemplate" parentKey="lootSlotFilter" hidden="true"/>
									<Slider name="$parentScrollBar" inherits="MinimalHybridScrollBarTemplate" parentKey="scrollBar">
										<Anchors>
											<Anchor point="TOPRIGHT" x="0" y="-18"/>
											<Anchor point="BOTTOMRIGHT" x="0" y="17"/>
										</Anchors>
										<Scripts>
											<OnLoad>
												self.trackBG:SetVertexColor(0.2, 0.13, 0.08, 0.25)
											</OnLoad>
										</Scripts>
									</Slider>
								</Frames>
								<Scripts>
									<OnShow>
										EncounterJournal_HideCreatures()
										EncounterJournal.encounter.instance:Hide()
										EncounterJournal.encounter.info.rightShadow:Show()
										EncounterJournal_LootUpdate()
										EncounterJournal.encounter.info.TitleFrame.encounterTitle:Hide()

										self.filter:SetPoint("TOPLEFT", self:GetParent(), "TOPRIGHT", -340, -13)
										self.slotFilter:SetPoint("TOPLEFT", self:GetParent(), "TOPRIGHT", -230, -13)
									</OnShow>
								</Scripts>
							</ScrollFrame>
							<DressUpModel name="$parentModelFrame" parentKey="model" inherits="ModelTemplate">
								<Size x="390" y="423"/>
								<Anchors>
									<Anchor point="BOTTOMRIGHT" x="-3" y="1"/>
								</Anchors>
								<Layers>
									<Layer level="BACKGROUND">
										<Texture name="$parentDungeonBG" file="Interface\EncounterJournal\UI-EJ-BACKGROUND-Default" parentKey="dungeonBG">
											<Size x="394" y="425"/>
											<Anchors>
												<Anchor point="BOTTOMLEFT" x="0" y="-2"/>
											</Anchors>
											<TexCoords left="0.76953125" right="0" top="0" bottom="0.830078125"/>
										</Texture>
									</Layer>
									<Layer level="BORDER">
										<Texture name="$parentShadow" file="Interface\EncounterJournal\UI-EJ-BossModelPaperFrame">
											<Size x="393" y="424"/>
											<Anchors>
												<Anchor point="BOTTOMRIGHT" x="3" y="0"/>
											</Anchors>
											<TexCoords left="0.767578125" right="0" top="0" bottom="0.828125"/>
										</Texture>
									</Layer>
									<Layer level="ARTWORK">
										<Texture name="$parentTitleBG" inherits="UI-EJ-BossNameShadow">
											<Anchors>
												<Anchor point="BOTTOM" x="0" y="-2"/>
											</Anchors>
										</Texture>
									</Layer>
									<Layer level="OVERLAY">
										<FontString name="$parentImageTile" inherits="QuestTitleFontBlackShadow" justifyH="CENTER" parentKey="imageTitle">
											<Size x="380" y="10"/>
											<Anchors>
												<Anchor point="BOTTOM" x="0" y="6"/>
											</Anchors>
										</FontString>
									</Layer>
								</Layers>
								<Scripts>
									<OnShow>
										self:GetParent().imageTitle = self.imageTitle

										EncounterJournal.encounter.info.TitleFrame.encounterTitle:Hide()
										EncounterJournal.encounter.info.rightShadow:Hide()
										EncounterJournal.encounter.info.difficulty:Hide()
									</OnShow>
								</Scripts>
							</DressUpModel>
							<Button name="$parentCreatureButton1" inherits="EncounterCreatureButtonTemplate">
								<Anchors>
									<Anchor point="TOPLEFT" relativeTo="$parentModelFrame" x="3" y="-35"/>
								</Anchors>
							</Button>
						</Frames>
						<Scripts>
							<OnLoad>
								<!-- self.creatureButtons = {} -->
								self.overviewTab:SetFrameLevel(self:GetFrameLevel())
								self.lootTab:SetFrameLevel(self:GetFrameLevel())
								self.bossTab:SetFrameLevel(self:GetFrameLevel())
								self.modelTab:SetFrameLevel(self:GetFrameLevel())
							</OnLoad>
						</Scripts>
					</Frame>
				</Frames>
			</Frame>
			<Frame name="$parentLootJournal" parentKey="LootJournal" hidden="true">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentInset" x="4" y="-51" />
					<Anchor point="BOTTOMRIGHT" relativeTo="$parentInset" x="-4" y="0"/>
				</Anchors>
				<Layers>
					<Layer level="BACKGROUND">
						<Texture atlas="loottab-background" file="Interface/EncounterJournal/LootTabBackground" useAtlasSize="true">
							<Size x="786" y="381"/>
							<Anchors>
								<Anchor point="TOP" x="0" y="4"/>
							</Anchors>
							<TexCoords left="0.000976562" right="0.768555" top="0.00195312" bottom="0.746094"/>
						</Texture>
					</Layer>
				</Layers>
				<Frames>
					<Frame name="LootJournalClassDropDown" parentKey="ClassDropDown" inherits="UIDropDownMenuTemplate" hidden="true">
						<Scripts>
							<OnLoad function="LootJournalClassDropDown_OnLoad"/>
						</Scripts>
					</Frame>
					<ScrollFrame name="$parentScrollFrame" parentKey="ItemSetsScrollFrame" inherits="MinimalHybridScrollFrameTemplate">
						<Size x="762" y="332"/>
						<Anchors>
							<Anchor point="BOTTOMLEFT" x="0" y="3"/>
						</Anchors>
						<Frames>
							<Button parentKey="ClassButton" inherits="EJButtonTemplate" text="FILTER">
								<Size x="114" y="26"/>
								<Anchors>
									<Anchor point="TOPRIGHT" x="-12" y="35"/>
								</Anchors>
								<Scripts>
									<OnClick>
										ToggleDropDownMenu(1, nil, self:GetParent():GetParent().ClassDropDown, self, 5, 0);
										PlaySound("igMainMenuOptionCheckBoxOn")
									</OnClick>
								</Scripts>
							</Button>
						</Frames>
						<Scripts>
							<OnLoad function="LootJournalItemSetsScrollFrame_OnLoad"/>
							<OnShow function="LootJournalItemSetsScrollFrame_OnShow"/>
							<!-- <OnLoad method="OnLoad"/> -->
							<!-- <OnShow method="OnShow"/> -->
							<!-- <OnHide method="OnHide"/> -->
							<!-- <OnEvent method="OnEvent"/> -->
						</Scripts>
					</ScrollFrame>
				</Frames>
			</Frame>
			<Button name="$parentTab1" inherits="CharacterFrameTabButtonTemplate" text="ADVENTURE_JOURNAL" id="1" parentKey="tab1">
				<Anchors>
					<Anchor point="BOTTOMLEFT" relativeTo="$parent" relativePoint="BOTTOMLEFT" x="19" y="-30"/>
				</Anchors>
				<Scripts>
					<OnClick function="Adventure_TabOnClick"/>
				</Scripts>
			</Button>
			<Button name="$parentTab2" inherits="CharacterFrameTabButtonTemplate" text="HEADHUNTING" id="2" parentKey="tab2">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentTab1" relativePoint="RIGHT" x="-16" y="0"/>
				</Anchors>
				<Scripts>
					<OnClick function="Adventure_TabOnClick"/>
				</Scripts>
			</Button>
		</Frames>
		<Scripts>
			<OnLoad function="EncounterJournal_OnLoad"/>
			<OnShow function="EncounterJournal_OnShow"/>
			<OnHide function="EncounterJournal_OnHide"/>
			<OnEvent function="EncounterJournal_OnEvent"/>
		</Scripts>
	</Frame>
</Ui>